"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=8125,exports.ids=[8125],exports.modules={53982:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}__name(Breadcrumb,"Breadcrumb")},84186:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>I18nBreadcrumbResolver});var _i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55633),_shared_empty_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(38475),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1272),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5e3);class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_1__.xI)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=(0,_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_2__.i)(route);return{provider:this.breadcrumbService,key,url:fullPath}}}__name(I18nBreadcrumbResolver,"I18nBreadcrumbResolver"),I18nBreadcrumbResolver.\u0275fac=__name(function(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.LFG(_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_0__.d))},"I18nBreadcrumbResolver_Factory"),I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yz7({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},55633:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>I18nBreadcrumbsService});var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(53982),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76477),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5e3);class I18nBreadcrumbsService{getBreadcrumbs(key,url){return(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_1__.a(key+".breadcrumbs",url)])}}__name(I18nBreadcrumbsService,"I18nBreadcrumbsService"),I18nBreadcrumbsService.\u0275fac=__name(function(t){return new(t||I18nBreadcrumbsService)},"I18nBreadcrumbsService_Factory"),I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Yz7({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},68125:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProcessPageModule:()=>ProcessPageModule});var shared_module=__webpack_require__(42501),router=__webpack_require__(74202),process_data_service=__webpack_require__(58451),operators=__webpack_require__(56672),cjs_operators=__webpack_require__(83292),link_service=__webpack_require__(74229),follow_link_config_model=__webpack_require__(18838),core=__webpack_require__(5e3),common=__webpack_require__(69808),var_directive=__webpack_require__(41989),process_model=(__webpack_require__(15817),__webpack_require__(42310)),script_data_service=__webpack_require__(74616),notifications_service=__webpack_require__(55489),request_service=__webpack_require__(64025),process_page_routing_paths=__webpack_require__(86073),empty_util=__webpack_require__(38475),ngx_translate_core=__webpack_require__(42466);function ProcessFormComponent_div_18_li_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li"),core._uU(1),core.qZA()),2&rf){const missing_r3=ctx.$implicit;core.xp6(1),core.Oqu(missing_r3)}}function ProcessFormComponent_div_18_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.ALo(2,"translate"),core.TgZ(3,"ul"),core.YNc(4,ProcessFormComponent_div_18_li_4_Template,2,1,"li",13),core.qZA()()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij(" ",core.lcZ(2,2,"process.new.parameter.required.missing")," "),core.xp6(3),core.Q6J("ngForOf",ctx_r1.missingParameters)}}__name(ProcessFormComponent_div_18_li_4_Template,"ProcessFormComponent_div_18_li_4_Template"),__name(ProcessFormComponent_div_18_Template,"ProcessFormComponent_div_18_Template");const _c0=__name(function(){return["/processes"]},"_c0");class ProcessFormComponent{constructor(scriptService,notificationsService,translationService,requestService,router2){this.scriptService=scriptService,this.notificationsService=notificationsService,this.translationService=translationService,this.requestService=requestService,this.router=router2,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new process_model.A}submitForm(form){if((0,empty_util.xb)(this.parameters)&&(this.parameters=[]),!this.validateForm(form)||this.isRequiredMissing())return;const stringParameters=this.parameters.map(parameter=>({name:parameter.name,value:this.checkValue(parameter)}));this.scriptService.invoke(this.selectedScript.id,stringParameters,this.files).pipe((0,operators.hC)()).subscribe(rd=>{if(rd.hasSucceeded){const title=this.translationService.get("process.new.notification.success.title"),content=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(title,content),this.sendBack()}else{const title=this.translationService.get("process.new.notification.error.title"),content=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(title,content)}})}checkValue(processParameter){return"object"==typeof processParameter.value?(this.files=[...this.files,processParameter.value],processParameter.value.name):processParameter.value}validateForm(form){let valid=!0;return Object.keys(form.controls).forEach(key=>{form.controls[key].invalid&&(form.controls[key].markAsDirty(),valid=!1)}),valid}isRequiredMissing(){this.missingParameters=[];const setParams=this.parameters.map(param=>param.name),requiredParams=this.selectedScript.parameters.filter(param=>param.mandatory);for(const rp of requiredParams)setParams.includes(rp.name)||this.missingParameters.push(rp.name);return this.missingParameters.length>0}sendBack(){this.requestService.removeByHrefSubstring("/processes"),this.router.navigateByUrl((0,process_page_routing_paths.dz)())}}function controlContainerFactory(controlContainer){return controlContainer}function NewProcessComponent_ng_container_0_ds_process_form_1_Template(rf,ctx){if(1&rf&&(core._UZ(0,"ds-process-form",2),core.ALo(1,"async")),2&rf){const process_r3=ctx.ngVar,ctx_r2=core.oxw(2);core.Q6J("selectedScript",core.lcZ(1,2,ctx_r2.script$))("parameters",process_r3.parameters)}}function NewProcessComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,NewProcessComponent_ng_container_0_ds_process_form_1_Template,2,4,"ds-process-form",1),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngVar",core.lcZ(2,1,ctx_r0.fromExisting$))}}function NewProcessComponent_ng_container_2_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"ds-process-form",3),core.BQk())}__name(ProcessFormComponent,"ProcessFormComponent"),ProcessFormComponent.\u0275fac=__name(function(t){return new(t||ProcessFormComponent)(core.Y36(script_data_service.UY),core.Y36(notifications_service.T),core.Y36(ngx_translate_core.sK),core.Y36(request_service.s),core.Y36(router.F0))},"ProcessFormComponent_Factory"),ProcessFormComponent.\u0275cmp=core.Xpm({type:ProcessFormComponent,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},decls:19,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6"],[3,"ngSubmit"],["form","ngForm"],[3,"script","select"],[3,"initialParams","script","updateParameters"],[1,"btn","btn-light","float-left",3,"routerLink"],["type","submit",1,"btn","btn-light","float-right"],[3,"script"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:__name(function(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"div",3)(6,"form",4,5),core.NdJ("ngSubmit",__name(function(){core.CHM(_r4);const _r0=core.MAs(7);return ctx.submitForm(_r0)},"ProcessFormComponent_Template_form_ngSubmit_6_listener")),core.TgZ(8,"ds-scripts-select",6),core.NdJ("select",__name(function($event){return ctx.selectedScript=$event,ctx.parameters=void 0},"ProcessFormComponent_Template_ds_scripts_select_select_8_listener")),core.qZA(),core.TgZ(9,"ds-process-parameters",7),core.NdJ("updateParameters",__name(function($event){return ctx.parameters=$event},"ProcessFormComponent_Template_ds_process_parameters_updateParameters_9_listener")),core.qZA(),core.TgZ(10,"button",8),core._uU(11),core.ALo(12,"translate"),core.qZA(),core.TgZ(13,"button",9),core._uU(14),core.ALo(15,"translate"),core.qZA()()(),core.TgZ(16,"div",3),core._UZ(17,"ds-script-help",10),core.qZA()(),core.YNc(18,ProcessFormComponent_div_18_Template,5,4,"div",11),core.qZA()}2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,9,ctx.headerKey)," "),core.xp6(5),core.Q6J("script",ctx.selectedScript),core.xp6(1),core.Q6J("initialParams",ctx.parameters)("script",ctx.selectedScript),core.xp6(1),core.Q6J("routerLink",core.DdM(15,_c0)),core.xp6(1),core.Oqu(core.lcZ(12,11,"process.new.cancel")),core.xp6(3),core.Oqu(core.lcZ(15,13,"process.new.submit")),core.xp6(3),core.Q6J("script",ctx.selectedScript),core.xp6(1),core.Q6J("ngIf",ctx.missingParameters.length>0))},"ProcessFormComponent_Template"),styles:[""]}),__name(controlContainerFactory,"controlContainerFactory"),__name(NewProcessComponent_ng_container_0_ds_process_form_1_Template,"NewProcessComponent_ng_container_0_ds_process_form_1_Template"),__name(NewProcessComponent_ng_container_0_Template,"NewProcessComponent_ng_container_0_Template"),__name(NewProcessComponent_ng_container_2_Template,"NewProcessComponent_ng_container_2_Template");class NewProcessComponent{constructor(route,processService,linkService){this.route=route,this.processService=processService,this.linkService=linkService}ngOnInit(){const id=this.route.snapshot.queryParams.id;id&&(this.fromExisting$=this.processService.findById(id).pipe((0,operators.Gp)()),this.script$=this.fromExisting$.pipe((0,cjs_operators.UI)(process=>this.linkService.resolveLink(process,(0,follow_link_config_model.l)("script"))),(0,cjs_operators.wt)(process=>process.script),(0,operators.Gp)()))}}__name(NewProcessComponent,"NewProcessComponent"),NewProcessComponent.\u0275fac=__name(function(t){return new(t||NewProcessComponent)(core.Y36(router.gz),core.Y36(process_data_service.n),core.Y36(link_service.M))},"NewProcessComponent_Factory"),NewProcessComponent.\u0275cmp=core.Xpm({type:NewProcessComponent,selectors:[["ds-new-process"]],decls:4,vars:6,consts:[[4,"ngIf"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,NewProcessComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async"),core.YNc(2,NewProcessComponent_ng_container_2_Template,2,0,"ng-container",0),core.ALo(3,"async")),2&rf&&(core.Q6J("ngIf",ctx.fromExisting$&&core.lcZ(1,2,ctx.fromExisting$)),core.xp6(2),core.Q6J("ngIf",!ctx.fromExisting$||!core.lcZ(3,4,ctx.fromExisting$)))},"NewProcessComponent_Template"),directives:[common.O5,var_directive.g,ProcessFormComponent],pipes:[common.Ov],styles:[""]});var pagination_component_options_model=__webpack_require__(74293),eperson_data_service=__webpack_require__(20789),pagination_service=__webpack_require__(94799),find_list_options_model=__webpack_require__(36877),pagination_component=__webpack_require__(92396);function ProcessOverviewComponent_ds_pagination_9_tr_26_td_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td"),core._uU(1),core.qZA()),2&rf){const ePersonName_r4=ctx.ngVar;core.xp6(1),core.Oqu(ePersonName_r4)}}__name(ProcessOverviewComponent_ds_pagination_9_tr_26_td_7_Template,"ProcessOverviewComponent_ds_pagination_9_tr_26_td_7_Template");const process_overview_component_c0=__name(function(a1){return["/processes/",a1]},"process_overview_component_c0");function ProcessOverviewComponent_ds_pagination_9_tr_26_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"tr")(1,"td")(2,"a",11),core._uU(3),core.qZA()(),core.TgZ(4,"td")(5,"a",11),core._uU(6),core.qZA()(),core.YNc(7,ProcessOverviewComponent_ds_pagination_9_tr_26_td_7_Template,2,1,"td",12),core.ALo(8,"async"),core.TgZ(9,"td"),core._uU(10),core.ALo(11,"date"),core.qZA(),core.TgZ(12,"td"),core._uU(13),core.ALo(14,"date"),core.qZA(),core.TgZ(15,"td"),core._uU(16),core.qZA()()),2&rf){const process_r2=ctx.$implicit,ctx_r1=core.oxw(2);core.xp6(2),core.Q6J("routerLink",core.VKq(18,process_overview_component_c0,process_r2.processId)),core.xp6(1),core.Oqu(process_r2.processId),core.xp6(2),core.Q6J("routerLink",core.VKq(20,process_overview_component_c0,process_r2.processId)),core.xp6(1),core.Oqu(process_r2.scriptName),core.xp6(1),core.Q6J("ngVar",core.lcZ(8,8,ctx_r1.getEpersonName(process_r2.userId))),core.xp6(3),core.Oqu(core.Dn7(11,10,process_r2.startTime,ctx_r1.dateFormat,"UTC")),core.xp6(3),core.Oqu(core.Dn7(14,14,process_r2.endTime,ctx_r1.dateFormat,"UTC")),core.xp6(3),core.Oqu(process_r2.processStatus)}}function ProcessOverviewComponent_ds_pagination_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-pagination",6),core.ALo(1,"async"),core.ALo(2,"async"),core.TgZ(3,"div",7)(4,"table",8)(5,"thead")(6,"tr")(7,"th",9),core._uU(8),core.ALo(9,"translate"),core.qZA(),core.TgZ(10,"th",9),core._uU(11),core.ALo(12,"translate"),core.qZA(),core.TgZ(13,"th",9),core._uU(14),core.ALo(15,"translate"),core.qZA(),core.TgZ(16,"th",9),core._uU(17),core.ALo(18,"translate"),core.qZA(),core.TgZ(19,"th",9),core._uU(20),core.ALo(21,"translate"),core.qZA(),core.TgZ(22,"th",9),core._uU(23),core.ALo(24,"translate"),core.qZA()()(),core.TgZ(25,"tbody"),core.YNc(26,ProcessOverviewComponent_ds_pagination_9_tr_26_Template,17,22,"tr",10),core.ALo(27,"async"),core.qZA()()()()),2&rf){const ctx_r0=core.oxw();let tmp_1_0,tmp_2_0,tmp_11_0;core.Q6J("paginationOptions",ctx_r0.pageConfig)("pageInfoState",null==(tmp_1_0=core.lcZ(1,12,ctx_r0.processesRD$))?null:tmp_1_0.payload)("collectionSize",null==(tmp_2_0=core.lcZ(2,14,ctx_r0.processesRD$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core.xp6(8),core.Oqu(core.lcZ(9,16,"process.overview.table.id")),core.xp6(3),core.Oqu(core.lcZ(12,18,"process.overview.table.name")),core.xp6(3),core.Oqu(core.lcZ(15,20,"process.overview.table.user")),core.xp6(3),core.Oqu(core.lcZ(18,22,"process.overview.table.start")),core.xp6(3),core.Oqu(core.lcZ(21,24,"process.overview.table.finish")),core.xp6(3),core.Oqu(core.lcZ(24,26,"process.overview.table.status")),core.xp6(3),core.Q6J("ngForOf",null==(tmp_11_0=core.lcZ(27,28,ctx_r0.processesRD$))||null==tmp_11_0.payload?null:tmp_11_0.payload.page)}}__name(ProcessOverviewComponent_ds_pagination_9_tr_26_Template,"ProcessOverviewComponent_ds_pagination_9_tr_26_Template"),__name(ProcessOverviewComponent_ds_pagination_9_Template,"ProcessOverviewComponent_ds_pagination_9_Template");class ProcessOverviewComponent{constructor(processService,paginationService,ePersonService){this.processService=processService,this.paginationService=paginationService,this.ePersonService=ePersonService,this.config=Object.assign(new find_list_options_model.R,{elementsPerPage:20}),this.pageConfig=Object.assign(new pagination_component_options_model.r,{id:"po",pageSize:20}),this.dateFormat="yyyy-MM-dd HH:mm:ss"}ngOnInit(){this.setProcesses()}setProcesses(){this.processesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,cjs_operators.wt)(config=>this.processService.findAll(config)))}getEpersonName(id){return this.ePersonService.findById(id).pipe((0,operators.Gp)(),(0,cjs_operators.UI)(eperson=>eperson.name))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id)}}__name(ProcessOverviewComponent,"ProcessOverviewComponent"),ProcessOverviewComponent.\u0275fac=__name(function(t){return new(t||ProcessOverviewComponent)(core.Y36(process_data_service.n),core.Y36(pagination_service.N),core.Y36(eperson_data_service.k))},"ProcessOverviewComponent_Factory"),ProcessOverviewComponent.\u0275cmp=core.Xpm({type:ProcessOverviewComponent,selectors:[["ds-process-overview"]],decls:11,vars:9,consts:[[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/processes/new",1,"btn","btn-lg","btn-success"],[1,"fas","fa-plus","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngVar"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"button",3),core._UZ(6,"i",4),core._uU(7),core.ALo(8,"translate"),core.qZA()(),core.YNc(9,ProcessOverviewComponent_ds_pagination_9_Template,28,30,"ds-pagination",5),core.ALo(10,"async"),core.qZA()),2&rf){let tmp_2_0;core.xp6(3),core.Oqu(core.lcZ(4,3,"process.overview.title")),core.xp6(4),core.Oqu(core.lcZ(8,5,"process.overview.new")),core.xp6(2),core.Q6J("ngIf",(null==(tmp_2_0=core.lcZ(10,7,ctx.processesRD$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)>0)}},"ProcessOverviewComponent_Template"),directives:[router.rH,common.O5,pagination_component.Q,common.sg,router.yS,var_directive.g],pipes:[ngx_translate_core.X$,common.Ov,common.uU],encapsulation:2});class ProcessPageResolver{constructor(processService){this.processService=processService}resolve(route,state){return this.processService.findById(route.params.id,!1,!0,(0,follow_link_config_model.l)("script")).pipe((0,operators.hC)())}}__name(ProcessPageResolver,"ProcessPageResolver"),ProcessPageResolver.\u0275fac=__name(function(t){return new(t||ProcessPageResolver)(core.LFG(process_data_service.n))},"ProcessPageResolver_Factory"),ProcessPageResolver.\u0275prov=core.Yz7({token:ProcessPageResolver,factory:ProcessPageResolver.\u0275fac});var cjs=__webpack_require__(76477),auth_service=__webpack_require__(36696),dso_name_service=__webpack_require__(63782),bitstream_data_service=__webpack_require__(82296),dspace_object_model=__webpack_require__(20166),url_combiner=__webpack_require__(69972),aletr_type=__webpack_require__(60300),process_status_model=__webpack_require__(90918),authorized_operators=__webpack_require__(59130),http=__webpack_require__(40520);class ProcessDetailFieldComponent{}__name(ProcessDetailFieldComponent,"ProcessDetailFieldComponent"),ProcessDetailFieldComponent.\u0275fac=__name(function(t){return new(t||ProcessDetailFieldComponent)},"ProcessDetailFieldComponent_Factory"),ProcessDetailFieldComponent.\u0275cmp=core.Xpm({type:ProcessDetailFieldComponent,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},ngContentSelectors:["*"],decls:4,vars:3,consts:[[1,"mt-4"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"h4",0),core._uU(1),core.ALo(2,"translate"),core.qZA(),core.Hsn(3)),2&rf&&(core.xp6(1),core.Oqu(core.lcZ(2,1,ctx.title)))},"ProcessDetailFieldComponent_Template"),pipes:[ngx_translate_core.X$],encapsulation:2});var file_download_link_component=__webpack_require__(19503),loading_component=__webpack_require__(27924),file_size_pipe=__webpack_require__(95765);function ProcessDetailComponent_div_0_ds_process_detail_field_13_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core._uU(1),core.qZA()),2&rf){const argument_r9=ctx.$implicit;core.xp6(1),core.AsE("",null==argument_r9?null:argument_r9.name," ",null==argument_r9?null:argument_r9.value,"")}}function ProcessDetailComponent_div_0_ds_process_detail_field_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",15),core.YNc(1,ProcessDetailComponent_div_0_ds_process_detail_field_13_div_1_Template,2,2,"div",16),core.qZA()),2&rf){const process_r1=core.oxw().ngVar;core.Q6J("title","process.detail.arguments"),core.xp6(1),core.Q6J("ngForOf",null==process_r1?null:process_r1.parameters)}}function ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_ds_file_download_link_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-file-download-link",20)(1,"span"),core._uU(2),core.qZA(),core.TgZ(3,"span"),core._uU(4),core.ALo(5,"dsFileSize"),core.qZA()()),2&rf){const file_r14=ctx.$implicit,ctx_r13=core.oxw(4);core.Q6J("bitstream",file_r14),core.xp6(2),core.Oqu(ctx_r13.getFileName(file_r14)),core.xp6(2),core.hij("(",core.lcZ(5,3,null==file_r14?null:file_r14.sizeBytes),")")}}function ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",18),core.YNc(1,ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_ds_file_download_link_1_Template,6,5,"ds-file-download-link",19),core.qZA()),2&rf){const files_r11=core.oxw().ngVar;core.Q6J("title","process.detail.output-files"),core.xp6(1),core.Q6J("ngForOf",files_r11)}}function ProcessDetailComponent_div_0_div_14_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.YNc(1,ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_Template,2,2,"ds-process-detail-field",17),core.qZA()),2&rf){const files_r11=ctx.ngVar;core.xp6(1),core.Q6J("ngIf",files_r11&&(null==files_r11?null:files_r11.length)>0)}}function ProcessDetailComponent_div_0_ds_process_detail_field_16_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",21),core.ALo(1,"translate"),core.TgZ(2,"div"),core._uU(3),core.ALo(4,"date"),core.qZA()()),2&rf){const process_r1=core.oxw().ngVar,ctx_r4=core.oxw();core.Q6J("title",core.lcZ(1,2,"process.detail.start-time")),core.xp6(3),core.Oqu(core.Dn7(4,4,process_r1.startTime,ctx_r4.dateFormat,"UTC"))}}function ProcessDetailComponent_div_0_ds_process_detail_field_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",22),core.ALo(1,"translate"),core.TgZ(2,"div"),core._uU(3),core.ALo(4,"date"),core.qZA()()),2&rf){const process_r1=core.oxw().ngVar,ctx_r5=core.oxw();core.Q6J("title",core.lcZ(1,2,"process.detail.end-time")),core.xp6(3),core.Oqu(core.Dn7(4,4,process_r1.endTime,ctx_r5.dateFormat,"UTC"))}}function ProcessDetailComponent_div_0_ds_process_detail_field_18_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",23),core.ALo(1,"translate"),core.TgZ(2,"div"),core._uU(3),core.qZA()()),2&rf){const process_r1=core.oxw().ngVar;core.Q6J("title",core.lcZ(1,2,"process.detail.status")),core.xp6(3),core.Oqu(process_r1.processStatus)}}function ProcessDetailComponent_div_0_ds_process_detail_field_19_button_1_Template(rf,ctx){if(1&rf){const _r25=core.EpF();core.TgZ(0,"button",29),core.NdJ("click",__name(function(){return core.CHM(_r25),core.oxw(3).showProcessOutputLogs()},"ProcessDetailComponent_div_0_ds_process_detail_field_19_button_1_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"translate"),core.qZA()}2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.detail.logs.button")," "))}function ProcessDetailComponent_div_0_ds_process_detail_field_19_ds_loading_2_Template(rf,ctx){1&rf&&(core._UZ(0,"ds-loading",30),core.ALo(1,"translate")),2&rf&&core.s9C("message",core.lcZ(1,1,"process.detail.logs.loading"))}function ProcessDetailComponent_div_0_ds_process_detail_field_19_pre_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"pre",31),core._uU(1),core.ALo(2,"async"),core.qZA()),2&rf){const ctx_r22=core.oxw(3);core.xp6(1),core.Oqu(core.lcZ(2,1,ctx_r22.outputLogs$))}}function ProcessDetailComponent_div_0_ds_process_detail_field_19_p_6_Template(rf,ctx){1&rf&&(core.TgZ(0,"p",32),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.detail.logs.none")," "))}function ProcessDetailComponent_div_0_ds_process_detail_field_19_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-process-detail-field",24),core.YNc(1,ProcessDetailComponent_div_0_ds_process_detail_field_19_button_1_Template,3,3,"button",25),core.YNc(2,ProcessDetailComponent_div_0_ds_process_detail_field_19_ds_loading_2_Template,2,3,"ds-loading",26),core.ALo(3,"async"),core.YNc(4,ProcessDetailComponent_div_0_ds_process_detail_field_19_pre_4_Template,3,3,"pre",27),core.ALo(5,"async"),core.YNc(6,ProcessDetailComponent_div_0_ds_process_detail_field_19_p_6_Template,3,3,"p",28),core.ALo(7,"async"),core.ALo(8,"async"),core.ALo(9,"async"),core.qZA()),2&rf){const process_r1=core.oxw().ngVar,ctx_r7=core.oxw();let tmp_3_0,tmp_4_0;core.Q6J("title","process.detail.output"),core.xp6(1),core.Q6J("ngIf",!ctx_r7.showOutputLogs&&null!=(null==process_r1||null==process_r1._links||null==process_r1._links.output?null:process_r1._links.output.href)),core.xp6(1),core.Q6J("ngIf",core.lcZ(3,5,ctx_r7.retrievingOutputLogs$)),core.xp6(2),core.Q6J("ngIf",ctx_r7.showOutputLogs&&(null==(tmp_3_0=core.lcZ(5,7,ctx_r7.outputLogs$))?null:tmp_3_0.length)>0),core.xp6(2),core.Q6J("ngIf",!core.lcZ(7,9,ctx_r7.retrievingOutputLogs$)&&ctx_r7.showOutputLogs&&!core.lcZ(8,11,ctx_r7.outputLogs$)||0==(null==(tmp_4_0=core.lcZ(9,13,ctx_r7.outputLogs$))?null:tmp_4_0.length)||!process_r1._links.output)}}__name(ProcessDetailComponent_div_0_ds_process_detail_field_13_div_1_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_13_div_1_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_13_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_13_Template"),__name(ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_ds_file_download_link_1_Template,"ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_ds_file_download_link_1_Template"),__name(ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_Template,"ProcessDetailComponent_div_0_div_14_ds_process_detail_field_1_Template"),__name(ProcessDetailComponent_div_0_div_14_Template,"ProcessDetailComponent_div_0_div_14_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_16_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_16_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_17_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_17_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_18_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_18_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_19_button_1_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_19_button_1_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_19_ds_loading_2_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_19_ds_loading_2_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_19_pre_4_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_19_pre_4_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_19_p_6_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_19_p_6_Template"),__name(ProcessDetailComponent_div_0_ds_process_detail_field_19_Template,"ProcessDetailComponent_div_0_ds_process_detail_field_19_Template");const process_detail_component_c0=__name(function(a0,a1){return{id:a0,name:a1}},"process_detail_component_c0"),_c1=__name(function(a0){return{id:a0}},"_c1");function ProcessDetailComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"div")(6,"button",4),core._UZ(7,"i",5),core._uU(8),core.ALo(9,"translate"),core.qZA()()(),core.TgZ(10,"ds-process-detail-field",6)(11,"div"),core._uU(12),core.qZA()(),core.YNc(13,ProcessDetailComponent_div_0_ds_process_detail_field_13_Template,2,2,"ds-process-detail-field",7),core.YNc(14,ProcessDetailComponent_div_0_div_14_Template,2,1,"div",8),core.ALo(15,"async"),core.YNc(16,ProcessDetailComponent_div_0_ds_process_detail_field_16_Template,5,8,"ds-process-detail-field",9),core.YNc(17,ProcessDetailComponent_div_0_ds_process_detail_field_17_Template,5,8,"ds-process-detail-field",10),core.YNc(18,ProcessDetailComponent_div_0_ds_process_detail_field_18_Template,4,4,"ds-process-detail-field",11),core.YNc(19,ProcessDetailComponent_div_0_ds_process_detail_field_19_Template,10,15,"ds-process-detail-field",12),core.TgZ(20,"div",13)(21,"a",14),core._uU(22),core.ALo(23,"translate"),core.qZA()()()),2&rf){const process_r1=ctx.ngVar,ctx_r0=core.oxw();let tmp_6_0;core.xp6(3),core.Oqu(core.xi3(4,13,"process.detail.title",core.WLB(22,process_detail_component_c0,null==process_r1?null:process_r1.processId,null==process_r1?null:process_r1.scriptName))),core.xp6(3),core.Q6J("queryParams",core.VKq(25,_c1,null==process_r1?null:process_r1.processId)),core.xp6(2),core.Oqu(core.lcZ(9,16,"process.detail.create")),core.xp6(2),core.Q6J("title","process.detail.script"),core.xp6(2),core.Oqu(null==process_r1?null:process_r1.scriptName),core.xp6(1),core.Q6J("ngIf",(null==process_r1?null:process_r1.parameters)&&(null==process_r1||null==process_r1.parameters?null:process_r1.parameters.length)>0),core.xp6(1),core.Q6J("ngVar",null==(tmp_6_0=core.lcZ(15,18,ctx_r0.filesRD$))||null==tmp_6_0.payload?null:tmp_6_0.payload.page),core.xp6(2),core.Q6J("ngIf",process_r1&&process_r1.startTime),core.xp6(1),core.Q6J("ngIf",process_r1&&process_r1.endTime),core.xp6(1),core.Q6J("ngIf",process_r1&&process_r1.processStatus),core.xp6(1),core.Q6J("ngIf",ctx_r0.isProcessFinished(process_r1)),core.xp6(2),core.Q6J("routerLink","/processes"),core.xp6(1),core.Oqu(core.lcZ(23,20,"process.detail.back"))}}__name(ProcessDetailComponent_div_0_Template,"ProcessDetailComponent_div_0_Template");class ProcessDetailComponent{constructor(route,router2,processService,bitstreamDataService,nameService,zone,authService,http2){this.route=route,this.router=router2,this.processService=processService,this.bitstreamDataService=bitstreamDataService,this.nameService=nameService,this.zone=zone,this.authService=authService,this.http=http2,this.AlertTypeEnum=aletr_type.N,this.outputLogs$=new cjs.BehaviorSubject(void 0),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.showOutputLogs=!1,this.retrievingOutputLogs$=new cjs.BehaviorSubject(!1),this.processRD$=this.route.data.pipe((0,cjs_operators.UI)(data=>data.process),(0,authorized_operators.Gh)(this.router,this.authService)),this.filesRD$=this.processRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(process=>this.processService.getFiles(process.processId)))}getFileName(bitstream){return bitstream instanceof dspace_object_model.t?this.nameService.getName(bitstream):"unknown"}showProcessOutputLogs(){console.log("showProcessOutputLogs"),this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const processOutputRD$=this.processRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(process=>this.bitstreamDataService.findByHref(process._links.output.href,!1)));this.outputLogFileUrl$=processOutputRD$.pipe((0,operators.xw)(),(0,cjs_operators.bw)(processOutputFileRD=>{204===processOutputFileRD.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,cjs_operators.wt)(processOutput=>{const url=processOutput.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,cjs_operators.qn)(1),(0,cjs_operators.UI)(token=>(0,empty_util.Uh)(token)?new url_combiner.R(url,`?authentication-token=${token}`).toString():url))}))}),this.outputLogFileUrl$.pipe((0,cjs_operators.qn)(1),(0,cjs_operators.wt)(url=>this.getTextFile(url)),(0,cjs_operators.xS)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(logs=>{this.outputLogs$.next(logs)})}getTextFile(filename){return this.http.get(filename,{responseType:"text"}).pipe((0,cjs_operators.xS)(()=>{this.showOutputLogs=!0}))}isProcessFinished(process){return(0,empty_util.Uh)(process)&&(0,empty_util.Uh)(process.processStatus)&&(process.processStatus.toString()===process_status_model.N[process_status_model.N.COMPLETED].toString()||process.processStatus.toString()===process_status_model.N[process_status_model.N.FAILED].toString())}}__name(ProcessDetailComponent,"ProcessDetailComponent"),ProcessDetailComponent.\u0275fac=__name(function(t){return new(t||ProcessDetailComponent)(core.Y36(router.gz),core.Y36(router.F0),core.Y36(process_data_service.n),core.Y36(bitstream_data_service.J),core.Y36(dso_name_service._),core.Y36(core.R0b),core.Y36(auth_service.e8),core.Y36(http.eN))},"ProcessDetailComponent_Factory"),ProcessDetailComponent.\u0275cmp=core.Xpm({type:ProcessDetailComponent,selectors:[["ds-process-detail"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/processes/new",1,"btn","btn-lg","btn-success",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-loading",3,"message"],[1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ProcessDetailComponent_div_0_Template,24,27,"div",0),core.ALo(1,"async")),2&rf){let tmp_0_0;core.Q6J("ngVar",null==(tmp_0_0=core.lcZ(1,1,ctx.processRD$))?null:tmp_0_0.payload)}},"ProcessDetailComponent_Template"),directives:[var_directive.g,router.rH,ProcessDetailFieldComponent,common.O5,common.sg,file_download_link_component.q,loading_component.N,router.yS],pipes:[common.Ov,ngx_translate_core.X$,file_size_pipe.p,common.uU],encapsulation:2});var i18n_breadcrumb_resolver=__webpack_require__(84186),breadcrumb_model=__webpack_require__(53982);class ProcessBreadcrumbsService{getBreadcrumbs(key,url){return(0,cjs.of)([new breadcrumb_model.a(key.processId+" - "+key.scriptName,url)])}}__name(ProcessBreadcrumbsService,"ProcessBreadcrumbsService"),ProcessBreadcrumbsService.\u0275fac=__name(function(t){return new(t||ProcessBreadcrumbsService)},"ProcessBreadcrumbsService_Factory"),ProcessBreadcrumbsService.\u0275prov=core.Yz7({token:ProcessBreadcrumbsService,factory:ProcessBreadcrumbsService.\u0275fac});class ProcessBreadcrumbResolver{constructor(breadcrumbService,processService){this.breadcrumbService=breadcrumbService,this.processService=processService}resolve(route,state){const id=route.params.id;return this.processService.findById(route.params.id,!0,!1,(0,follow_link_config_model.l)("script")).pipe((0,operators.xw)(),(0,operators.xe)(),(0,cjs_operators.UI)(object=>{const fullPath=state.url,url=fullPath.substr(0,fullPath.indexOf(id))+id;return{provider:this.breadcrumbService,key:object,url}}))}}__name(ProcessBreadcrumbResolver,"ProcessBreadcrumbResolver"),ProcessBreadcrumbResolver.\u0275fac=__name(function(t){return new(t||ProcessBreadcrumbResolver)(core.LFG(ProcessBreadcrumbsService),core.LFG(process_data_service.n))},"ProcessBreadcrumbResolver_Factory"),ProcessBreadcrumbResolver.\u0275prov=core.Yz7({token:ProcessBreadcrumbResolver,factory:ProcessBreadcrumbResolver.\u0275fac});var authenticated_guard=__webpack_require__(29714);class ProcessPageRoutingModule{}__name(ProcessPageRoutingModule,"ProcessPageRoutingModule"),ProcessPageRoutingModule.\u0275fac=__name(function(t){return new(t||ProcessPageRoutingModule)},"ProcessPageRoutingModule_Factory"),ProcessPageRoutingModule.\u0275mod=core.oAB({type:ProcessPageRoutingModule}),ProcessPageRoutingModule.\u0275inj=core.cJS({providers:[ProcessPageResolver],imports:[[router.Bz.forChild([{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.t},data:{breadcrumbKey:"process.overview"},canActivate:[authenticated_guard.J],children:[{path:"",component:ProcessOverviewComponent,data:{title:"process.overview.title"}},{path:"new",component:NewProcessComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.t},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:ProcessDetailComponent,resolve:{process:ProcessPageResolver,breadcrumb:ProcessBreadcrumbResolver}}]}])]]});var fesm2015_forms=__webpack_require__(93075);function ScriptsSelectComponent_div_0_option_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",5),core._uU(1),core.qZA()),2&rf){const script_r4=ctx.$implicit;core.Q6J("ngValue",script_r4.id),core.xp6(1),core.hij(" ",script_r4.name," ")}}function ScriptsSelectComponent_div_0_div_11_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.new.select-script.required")," "))}function ScriptsSelectComponent_div_0_div_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",8),core.YNc(1,ScriptsSelectComponent_div_0_div_11_div_1_Template,3,3,"div",9),core.qZA()),2&rf){core.oxw();const _r1=core.MAs(5);core.xp6(1),core.Q6J("ngIf",_r1.errors.required)}}function ScriptsSelectComponent_div_0_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",1)(1,"label",2),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"select",3,4),core.NdJ("ngModelChange",__name(function($event){core.CHM(_r7);return core.oxw().selectedScript=$event},"ScriptsSelectComponent_div_0_Template_select_ngModelChange_4_listener")),core.TgZ(6,"option",5),core._uU(7),core.ALo(8,"translate"),core.qZA(),core.YNc(9,ScriptsSelectComponent_div_0_option_9_Template,2,2,"option",6),core.ALo(10,"async"),core.qZA(),core.YNc(11,ScriptsSelectComponent_div_0_div_11_Template,2,1,"div",7),core.qZA()}if(2&rf){const _r1=core.MAs(5),ctx_r0=core.oxw();core.xp6(2),core.Oqu(core.lcZ(3,6,"process.new.select-script")),core.xp6(2),core.Q6J("ngModel",ctx_r0.selectedScript),core.xp6(2),core.Q6J("ngValue",void 0),core.xp6(1),core.Oqu(core.lcZ(8,8,"process.new.select-script.placeholder")),core.xp6(2),core.Q6J("ngForOf",core.lcZ(10,10,ctx_r0.scripts$)),core.xp6(2),core.Q6J("ngIf",_r1.invalid&&(_r1.dirty||_r1.touched))}}__name(ScriptsSelectComponent_div_0_option_9_Template,"ScriptsSelectComponent_div_0_option_9_Template"),__name(ScriptsSelectComponent_div_0_div_11_div_1_Template,"ScriptsSelectComponent_div_0_div_11_div_1_Template"),__name(ScriptsSelectComponent_div_0_div_11_Template,"ScriptsSelectComponent_div_0_div_11_Template"),__name(ScriptsSelectComponent_div_0_Template,"ScriptsSelectComponent_div_0_Template");class ScriptsSelectComponent{constructor(scriptService,router2,route){this.scriptService=scriptService,this.router=router2,this.route=route,this.select=new core.vpe}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,operators.xw)(),(0,operators.xe)(),(0,cjs_operators.UI)(paginatedList=>paginatedList.page)),this.routeSub=this.route.queryParams.pipe((0,cjs_operators.hX)(params=>(0,empty_util.xI)(params.id)),(0,cjs_operators.UI)(params=>params.script),(0,cjs_operators.xb)(),(0,cjs_operators.wt)(id=>this.scripts$.pipe((0,cjs_operators.qn)(1),(0,cjs_operators.UI)(scripts=>scripts.find(script=>script.id===id))))).subscribe(script=>{this._selectedScript=script,this.select.emit(script)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(value){this.router.navigate([],{queryParams:{script:value}})}set script(value){this._selectedScript=value}ngOnDestroy(){(0,empty_util.Uh)(this.routeSub)&&this.routeSub.unsubscribe()}}var ScriptParameterType,ScriptParameterType2;function ScriptHelpComponent_tr_6_ng_container_3_Template(rf,ctx){1&rf&&core.GkF(0)}function ScriptHelpComponent_tr_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"tr")(1,"td",4),core._uU(2),core.YNc(3,ScriptHelpComponent_tr_6_ng_container_3_Template,1,0,"ng-container",5),core.qZA(),core.TgZ(4,"td"),core._uU(5),core.qZA()()),2&rf){const param_r3=ctx.$implicit;core.oxw();const _r1=core.MAs(8);core.xp6(2),core.AsE("",param_r3.name," ",param_r3.nameLong," "),core.xp6(1),core.Q6J("ngTemplateOutlet",_r1)("ngTemplateOutletContext",param_r3),core.xp6(2),core.Oqu(param_r3.description)}}function ScriptHelpComponent_ng_template_7_span_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("<",core.lcZ(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("<",core.lcZ(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("<",core.lcZ(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij("<",core.lcZ(2,1,"process.new.parameter.type.file"),">"))}function ScriptHelpComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.ynx(0,6),core.YNc(1,ScriptHelpComponent_ng_template_7_span_1_Template,3,3,"span",7),core.YNc(2,ScriptHelpComponent_ng_template_7_span_2_Template,3,3,"span",7),core.YNc(3,ScriptHelpComponent_ng_template_7_span_3_Template,3,3,"span",7),core.YNc(4,ScriptHelpComponent_ng_template_7_span_4_Template,3,3,"span",7),core.BQk()),2&rf){const type_r5=ctx.type,ctx_r2=core.oxw();core.Q6J("ngSwitch",type_r5),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r2.parameterTypes.DATE),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r2.parameterTypes.STRING),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r2.parameterTypes.OUTPUT),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r2.parameterTypes.FILE)}}__name(ScriptsSelectComponent,"ScriptsSelectComponent"),ScriptsSelectComponent.\u0275fac=__name(function(t){return new(t||ScriptsSelectComponent)(core.Y36(script_data_service.UY),core.Y36(router.F0),core.Y36(router.gz))},"ScriptsSelectComponent_Factory"),ScriptsSelectComponent.\u0275cmp=core.Xpm({type:ScriptsSelectComponent,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}])],decls:2,vars:3,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModel","ngModelChange"],["script","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ScriptsSelectComponent_div_0_Template,12,12,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.scripts$))},"ScriptsSelectComponent_Template"),directives:[common.O5,fesm2015_forms.EJ,fesm2015_forms.Q7,fesm2015_forms.JJ,fesm2015_forms.On,fesm2015_forms.YN,fesm2015_forms.Kr,common.sg],pipes:[common.Ov,ngx_translate_core.X$],styles:[""]}),(ScriptParameterType2=ScriptParameterType||(ScriptParameterType={})).STRING="String",ScriptParameterType2.DATE="date",ScriptParameterType2.BOOLEAN="boolean",ScriptParameterType2.FILE="InputStream",ScriptParameterType2.OUTPUT="OutputStream",__name(ScriptHelpComponent_tr_6_ng_container_3_Template,"ScriptHelpComponent_tr_6_ng_container_3_Template"),__name(ScriptHelpComponent_tr_6_Template,"ScriptHelpComponent_tr_6_Template"),__name(ScriptHelpComponent_ng_template_7_span_1_Template,"ScriptHelpComponent_ng_template_7_span_1_Template"),__name(ScriptHelpComponent_ng_template_7_span_2_Template,"ScriptHelpComponent_ng_template_7_span_2_Template"),__name(ScriptHelpComponent_ng_template_7_span_3_Template,"ScriptHelpComponent_ng_template_7_span_3_Template"),__name(ScriptHelpComponent_ng_template_7_span_4_Template,"ScriptHelpComponent_ng_template_7_span_4_Template"),__name(ScriptHelpComponent_ng_template_7_Template,"ScriptHelpComponent_ng_template_7_Template");class ScriptHelpComponent{constructor(){this.parameterTypes=ScriptParameterType}}__name(ScriptHelpComponent,"ScriptHelpComponent"),ScriptHelpComponent.\u0275fac=__name(function(t){return new(t||ScriptHelpComponent)},"ScriptHelpComponent_Factory"),ScriptHelpComponent.\u0275cmp=core.Xpm({type:ScriptHelpComponent,selectors:[["ds-script-help"]],inputs:{script:"script"},decls:9,vars:3,consts:[[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],["type",""],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"h3"),core._uU(2),core.qZA(),core.TgZ(3,"span"),core._uU(4),core.qZA(),core.TgZ(5,"table",1),core.YNc(6,ScriptHelpComponent_tr_6_Template,6,5,"tr",2),core.qZA()(),core.YNc(7,ScriptHelpComponent_ng_template_7_Template,5,5,"ng-template",null,3,core.W1O)),2&rf&&(core.xp6(2),core.Oqu(null==ctx.script?null:ctx.script.name),core.xp6(2),core.Oqu(null==ctx.script?null:ctx.script.description),core.xp6(2),core.Q6J("ngForOf",null==ctx.script?null:ctx.script.parameters))},"ScriptHelpComponent_Template"),directives:[common.sg,common.tP,common.RF,common.n9],pipes:[ngx_translate_core.X$],styles:[""]});var process_parameter_model=__webpack_require__(92952);class ValueInputComponent{constructor(){this.updateValue=new core.vpe}}function StringValueInputComponent_div_2_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.new.parameter.string.required")," "))}function StringValueInputComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3),core.YNc(1,StringValueInputComponent_div_2_div_1_Template,3,3,"div",4),core.qZA()),2&rf){core.oxw();const _r0=core.MAs(1);core.xp6(1),core.Q6J("ngIf",_r0.errors.required)}}__name(ValueInputComponent,"ValueInputComponent"),ValueInputComponent.\u0275fac=__name(function(t){return new(t||ValueInputComponent)},"ValueInputComponent_Factory"),ValueInputComponent.\u0275cmp=core.Xpm({type:ValueInputComponent,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:__name(function(rf,ctx){},"ValueInputComponent_Template"),encapsulation:2}),__name(StringValueInputComponent_div_2_div_1_Template,"StringValueInputComponent_div_2_div_1_Template"),__name(StringValueInputComponent_div_2_Template,"StringValueInputComponent_div_2_Template");class StringValueInputComponent extends ValueInputComponent{ngOnInit(){this.value=this.initialValue}setValue(value){this.value=value,this.updateValue.emit(value)}}function DateValueInputComponent_div_2_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.new.parameter.string.required")," "))}function DateValueInputComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3),core.YNc(1,DateValueInputComponent_div_2_div_1_Template,3,3,"div",4),core.qZA()),2&rf){core.oxw();const _r0=core.MAs(1);core.xp6(1),core.Q6J("ngIf",_r0.errors.required)}}__name(StringValueInputComponent,"StringValueInputComponent"),StringValueInputComponent.\u0275fac=function(){let \u0275StringValueInputComponent_BaseFactory;return __name(function(t){return(\u0275StringValueInputComponent_BaseFactory||(\u0275StringValueInputComponent_BaseFactory=core.n5z(StringValueInputComponent)))(t||StringValueInputComponent)},"StringValueInputComponent_Factory")}(),StringValueInputComponent.\u0275cmp=core.Xpm({type:StringValueInputComponent,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}]),core.qOj],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"input",0,1),core.NdJ("ngModelChange",__name(function($event){return ctx.setValue($event)},"StringValueInputComponent_Template_input_ngModelChange_0_listener")),core.qZA(),core.YNc(2,StringValueInputComponent_div_2_Template,2,1,"div",2)),2&rf){const _r0=core.MAs(1);core.MGl("name","string-value-",ctx.index,"")("id","string-value-",ctx.index,""),core.Q6J("ngModel",ctx.value),core.xp6(2),core.Q6J("ngIf",_r0.invalid&&(_r0.dirty||_r0.touched))}},"StringValueInputComponent_Template"),directives:[fesm2015_forms.Fj,fesm2015_forms.Q7,fesm2015_forms.JJ,fesm2015_forms.On,common.O5],pipes:[ngx_translate_core.X$],styles:[""]}),__name(DateValueInputComponent_div_2_div_1_Template,"DateValueInputComponent_div_2_div_1_Template"),__name(DateValueInputComponent_div_2_Template,"DateValueInputComponent_div_2_Template");class DateValueInputComponent extends ValueInputComponent{ngOnInit(){this.value=this.initialValue}setValue(value){this.value=value,this.updateValue.emit(value)}}__name(DateValueInputComponent,"DateValueInputComponent"),DateValueInputComponent.\u0275fac=function(){let \u0275DateValueInputComponent_BaseFactory;return __name(function(t){return(\u0275DateValueInputComponent_BaseFactory||(\u0275DateValueInputComponent_BaseFactory=core.n5z(DateValueInputComponent)))(t||DateValueInputComponent)},"DateValueInputComponent_Factory")}(),DateValueInputComponent.\u0275cmp=core.Xpm({type:DateValueInputComponent,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}]),core.qOj],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"input",0,1),core.NdJ("ngModelChange",__name(function($event){return ctx.setValue($event)},"DateValueInputComponent_Template_input_ngModelChange_0_listener")),core.qZA(),core.YNc(2,DateValueInputComponent_div_2_Template,2,1,"div",2)),2&rf){const _r0=core.MAs(1);core.MGl("name","date-value-",ctx.index,"")("id","date-value-",ctx.index,""),core.Q6J("ngModel",ctx.value),core.xp6(2),core.Q6J("ngIf",_r0.invalid&&(_r0.dirty||_r0.touched))}},"DateValueInputComponent_Template"),directives:[fesm2015_forms.Fj,fesm2015_forms.Q7,fesm2015_forms.JJ,fesm2015_forms.On,common.O5],pipes:[ngx_translate_core.X$],styles:[""]});var file_value_accessor_directive=__webpack_require__(97760),require_file_validator=__webpack_require__(86322);function FileValueInputComponent_div_8_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"process.new.parameter.file.required")," "))}function FileValueInputComponent_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",6),core.YNc(1,FileValueInputComponent_div_8_div_1_Template,3,3,"div",7),core.qZA()),2&rf){core.oxw();const _r0=core.MAs(7);core.xp6(1),core.Q6J("ngIf",_r0.errors.required)}}__name(FileValueInputComponent_div_8_div_1_Template,"FileValueInputComponent_div_8_div_1_Template"),__name(FileValueInputComponent_div_8_Template,"FileValueInputComponent_div_8_Template");class FileValueInputComponent extends ValueInputComponent{setFile(files){this.fileObject=files.length>0?files[0]:void 0,this.updateValue.emit(this.fileObject)}}__name(FileValueInputComponent,"FileValueInputComponent"),FileValueInputComponent.\u0275fac=function(){let \u0275FileValueInputComponent_BaseFactory;return __name(function(t){return(\u0275FileValueInputComponent_BaseFactory||(\u0275FileValueInputComponent_BaseFactory=core.n5z(FileValueInputComponent)))(t||FileValueInputComponent)},"FileValueInputComponent_Factory")}(),FileValueInputComponent.\u0275cmp=core.Xpm({type:FileValueInputComponent,selectors:[["ds-file-value-input"]],features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}]),core.qOj],decls:9,vars:9,consts:[[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-light"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"name","id","ngModel","ngModelChange"],["file","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"label",0)(1,"span",1),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"span",2),core._uU(5),core.qZA()(),core.TgZ(6,"input",3,4),core.NdJ("ngModelChange",__name(function($event){return ctx.setFile($event)},"FileValueInputComponent_Template_input_ngModelChange_6_listener")),core.qZA(),core.YNc(8,FileValueInputComponent_div_8_Template,2,1,"div",5)),2&rf){const _r0=core.MAs(7);core.MGl("for","file-upload-",ctx.index,""),core.xp6(2),core.hij(" ",core.lcZ(3,7,"process.new.parameter.file.upload-button")," "),core.xp6(3),core.Oqu(null==ctx.fileObject?null:ctx.fileObject.name),core.xp6(1),core.MGl("name","file-upload-",ctx.index,"")("id","file-upload-",ctx.index,""),core.Q6J("ngModel",ctx.fileObject),core.xp6(2),core.Q6J("ngIf",_r0.invalid&&(_r0.dirty||_r0.touched))}},"FileValueInputComponent_Template"),directives:[file_value_accessor_directive.k,fesm2015_forms.Fj,require_file_validator.C,fesm2015_forms.JJ,fesm2015_forms.On,common.O5],pipes:[ngx_translate_core.X$],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]});class BooleanValueInputComponent extends ValueInputComponent{ngOnInit(){this.updateValue.emit(!0)}}function ParameterValueInputComponent_ds_string_value_input_1_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"ds-string-value-input",3),core.NdJ("updateValue",__name(function($event){return core.CHM(_r6),core.oxw().updateValue.emit($event)},"ParameterValueInputComponent_ds_string_value_input_1_Template_ds_string_value_input_updateValue_0_listener")),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("initialValue",ctx_r0.initialValue)("index",ctx_r0.index)}}function ParameterValueInputComponent_ds_string_value_input_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"ds-string-value-input",3),core.NdJ("updateValue",__name(function($event){return core.CHM(_r8),core.oxw().updateValue.emit($event)},"ParameterValueInputComponent_ds_string_value_input_2_Template_ds_string_value_input_updateValue_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.Q6J("initialValue",ctx_r1.initialValue)("index",ctx_r1.index)}}function ParameterValueInputComponent_ds_date_value_input_3_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"ds-date-value-input",3),core.NdJ("updateValue",__name(function($event){return core.CHM(_r10),core.oxw().updateValue.emit($event)},"ParameterValueInputComponent_ds_date_value_input_3_Template_ds_date_value_input_updateValue_0_listener")),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("initialValue",ctx_r2.initialValue)("index",ctx_r2.index)}}function ParameterValueInputComponent_ds_file_value_input_4_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"ds-file-value-input",4),core.NdJ("updateValue",__name(function($event){return core.CHM(_r12),core.oxw().updateValue.emit($event)},"ParameterValueInputComponent_ds_file_value_input_4_Template_ds_file_value_input_updateValue_0_listener")),core.qZA()}if(2&rf){const ctx_r3=core.oxw();core.Q6J("index",ctx_r3.index)}}function ParameterValueInputComponent_ds_boolean_value_input_5_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.TgZ(0,"ds-boolean-value-input",4),core.NdJ("updateValue",__name(function($event){return core.CHM(_r14),core.oxw().updateValue.emit($event)},"ParameterValueInputComponent_ds_boolean_value_input_5_Template_ds_boolean_value_input_updateValue_0_listener")),core.qZA()}if(2&rf){const ctx_r4=core.oxw();core.Q6J("index",ctx_r4.index)}}__name(BooleanValueInputComponent,"BooleanValueInputComponent"),BooleanValueInputComponent.\u0275fac=function(){let \u0275BooleanValueInputComponent_BaseFactory;return __name(function(t){return(\u0275BooleanValueInputComponent_BaseFactory||(\u0275BooleanValueInputComponent_BaseFactory=core.n5z(BooleanValueInputComponent)))(t||BooleanValueInputComponent)},"BooleanValueInputComponent_Factory")}(),BooleanValueInputComponent.\u0275cmp=core.Xpm({type:BooleanValueInputComponent,selectors:[["ds-boolean-value-input"]],features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}]),core.qOj],decls:1,vars:2,consts:[["type","hidden","value","true",3,"name","id"]],template:__name(function(rf,ctx){1&rf&&core._UZ(0,"input",0),2&rf&&core.MGl("name","boolean-value-",ctx.index,"")("id","boolean-value-",ctx.index,"")},"BooleanValueInputComponent_Template"),styles:[""]}),__name(ParameterValueInputComponent_ds_string_value_input_1_Template,"ParameterValueInputComponent_ds_string_value_input_1_Template"),__name(ParameterValueInputComponent_ds_string_value_input_2_Template,"ParameterValueInputComponent_ds_string_value_input_2_Template"),__name(ParameterValueInputComponent_ds_date_value_input_3_Template,"ParameterValueInputComponent_ds_date_value_input_3_Template"),__name(ParameterValueInputComponent_ds_file_value_input_4_Template,"ParameterValueInputComponent_ds_file_value_input_4_Template"),__name(ParameterValueInputComponent_ds_boolean_value_input_5_Template,"ParameterValueInputComponent_ds_boolean_value_input_5_Template");class ParameterValueInputComponent{constructor(){this.updateValue=new core.vpe,this.parameterTypes=ScriptParameterType}}function ParameterSelectComponent_option_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",3),core._uU(1),core.qZA()),2&rf){const param_r4=ctx.$implicit;core.Q6J("ngValue",param_r4.name),core.xp6(1),core.hij(" ",param_r4.nameLong||param_r4.name," ")}}function ParameterSelectComponent_button_7_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw();return ctx_r5.removeParameter.emit(ctx_r5.parameterValue)},"ParameterSelectComponent_button_7_Template_button_click_0_listener")),core._UZ(1,"span",9),core.qZA()}}function ParameterSelectComponent_span_8_Template(rf,ctx){1&rf&&core._UZ(0,"span",10)}__name(ParameterValueInputComponent,"ParameterValueInputComponent"),ParameterValueInputComponent.\u0275fac=__name(function(t){return new(t||ParameterValueInputComponent)},"ParameterValueInputComponent_Factory"),ParameterValueInputComponent.\u0275cmp=core.Xpm({type:ParameterValueInputComponent,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}])],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"initialValue","index","updateValue"],[3,"index","updateValue"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ParameterValueInputComponent_ds_string_value_input_1_Template,1,2,"ds-string-value-input",1),core.YNc(2,ParameterValueInputComponent_ds_string_value_input_2_Template,1,2,"ds-string-value-input",1),core.YNc(3,ParameterValueInputComponent_ds_date_value_input_3_Template,1,2,"ds-date-value-input",1),core.YNc(4,ParameterValueInputComponent_ds_file_value_input_4_Template,1,1,"ds-file-value-input",2),core.YNc(5,ParameterValueInputComponent_ds_boolean_value_input_5_Template,1,1,"ds-boolean-value-input",2),core.qZA()),2&rf&&(core.Q6J("ngSwitch",null==ctx.parameter?null:ctx.parameter.type),core.xp6(1),core.Q6J("ngSwitchCase",ctx.parameterTypes.STRING),core.xp6(1),core.Q6J("ngSwitchCase",ctx.parameterTypes.OUTPUT),core.xp6(1),core.Q6J("ngSwitchCase",ctx.parameterTypes.DATE),core.xp6(1),core.Q6J("ngSwitchCase",ctx.parameterTypes.FILE),core.xp6(1),core.Q6J("ngSwitchCase",ctx.parameterTypes.BOOLEAN))},"ParameterValueInputComponent_Template"),directives:[common.RF,common.n9,StringValueInputComponent,DateValueInputComponent,FileValueInputComponent,BooleanValueInputComponent],styles:[""]}),__name(ParameterSelectComponent_option_5_Template,"ParameterSelectComponent_option_5_Template"),__name(ParameterSelectComponent_button_7_Template,"ParameterSelectComponent_button_7_Template"),__name(ParameterSelectComponent_span_8_Template,"ParameterSelectComponent_span_8_Template");class ParameterSelectComponent{constructor(){this.parameterValue=new process_parameter_model.N,this.removeParameter=new core.vpe,this.changeParameter=new core.vpe}get selectedScriptParameter(){return this.parameters.find(parameter=>parameter.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(value){this.parameterValue.name=value,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(value){this.parameterValue.value=value,this.changeParameter.emit(this.parameterValue)}}function ProcessParametersComponent_div_0_ds_parameter_select_4_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"ds-parameter-select",3),core.NdJ("removeParameter",__name(function(){const i_r3=core.CHM(_r6).index;return core.oxw(2).removeParameter(i_r3)},"ProcessParametersComponent_div_0_ds_parameter_select_4_Template_ds_parameter_select_removeParameter_0_listener"))("changeParameter",__name(function($event){const i_r3=core.CHM(_r6).index;return core.oxw(2).updateParameter($event,i_r3)},"ProcessParametersComponent_div_0_ds_parameter_select_4_Template_ds_parameter_select_changeParameter_0_listener")),core.qZA()}if(2&rf){const value_r2=ctx.$implicit,i_r3=ctx.index,last_r4=ctx.last,ctx_r1=core.oxw(2);core.Q6J("parameters",ctx_r1.script.parameters)("parameterValue",value_r2)("removable",!last_r4)("index",i_r3)}}function ProcessParametersComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"label"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.YNc(4,ProcessParametersComponent_div_0_ds_parameter_select_4_Template,1,4,"ds-parameter-select",2),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(2),core.Oqu(core.lcZ(3,2,"process.new.select-parameters")),core.xp6(2),core.Q6J("ngForOf",ctx_r0.parameterValues)}}__name(ParameterSelectComponent,"ParameterSelectComponent"),ParameterSelectComponent.\u0275fac=__name(function(t){return new(t||ParameterSelectComponent)},"ParameterSelectComponent_Factory"),ParameterSelectComponent.\u0275cmp=core.Xpm({type:ParameterSelectComponent,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}])],decls:9,vars:9,consts:[[1,"form-row","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"name","ngModel","ngModelChange"],["param","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col",3,"initialValue","parameter","index","updateValue"],["class","btn btn-light col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-light","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"select",1,2),core.NdJ("ngModelChange",__name(function($event){return ctx.selectedParameter=$event},"ParameterSelectComponent_Template_select_ngModelChange_1_listener")),core.TgZ(3,"option",3),core._uU(4,"Add a parameter..."),core.qZA(),core.YNc(5,ParameterSelectComponent_option_5_Template,2,2,"option",4),core.qZA(),core.TgZ(6,"ds-parameter-value-input",5),core.NdJ("updateValue",__name(function($event){return ctx.selectedParameterValue=$event},"ParameterSelectComponent_Template_ds_parameter_value_input_updateValue_6_listener")),core.qZA(),core.YNc(7,ParameterSelectComponent_button_7_Template,2,0,"button",6),core.YNc(8,ParameterSelectComponent_span_8_Template,1,0,"span",7),core.qZA()),2&rf&&(core.xp6(1),core.MGl("name","parameter-",ctx.index,""),core.Q6J("ngModel",ctx.selectedParameter),core.xp6(2),core.Q6J("ngValue",void 0),core.xp6(2),core.Q6J("ngForOf",ctx.parameters),core.xp6(1),core.Q6J("initialValue",ctx.parameterValue.value)("parameter",ctx.selectedScriptParameter)("index",ctx.index),core.xp6(1),core.Q6J("ngIf",ctx.removable),core.xp6(1),core.Q6J("ngIf",!ctx.removable))},"ParameterSelectComponent_Template"),directives:[fesm2015_forms.EJ,fesm2015_forms.JJ,fesm2015_forms.On,fesm2015_forms.YN,fesm2015_forms.Kr,common.sg,ParameterValueInputComponent,common.O5],styles:[""]}),__name(ProcessParametersComponent_div_0_ds_parameter_select_4_Template,"ProcessParametersComponent_div_0_ds_parameter_select_4_Template"),__name(ProcessParametersComponent_div_0_Template,"ProcessParametersComponent_div_0_Template");class ProcessParametersComponent{constructor(){this.updateParameters=new core.vpe}ngOnInit(){(0,empty_util.Uh)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(changes){changes.script&&this.initParameters()}initParameters(){(0,empty_util.Uh)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(processParameter,index){this.parameterValues[index]=processParameter,index===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(param=>(0,empty_util.Uh)(param.name)))}removeParameter(index){this.parameterValues=this.parameterValues.filter((value,i)=>i!==index),this.updateParameters.emit(this.parameterValues.filter(param=>(0,empty_util.Uh)(param.name)))}initializeParameter(){(0,empty_util.Uh)(this.script)&&(this.parameterValues=this.script.parameters.filter(param=>param.mandatory).map(parameter=>Object.assign(new process_parameter_model.N,{name:parameter.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new process_parameter_model.N]}}__name(ProcessParametersComponent,"ProcessParametersComponent"),ProcessParametersComponent.\u0275fac=__name(function(t){return new(t||ProcessParametersComponent)},"ProcessParametersComponent_Factory"),ProcessParametersComponent.\u0275cmp=core.Xpm({type:ProcessParametersComponent,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},features:[core._Bn([],[{provide:fesm2015_forms.gN,useFactory:controlContainerFactory,deps:[[new core.FiY,fesm2015_forms.F]]}]),core.TTD],decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ProcessParametersComponent_div_0_Template,5,4,"div",0),2&rf&&core.Q6J("ngIf",ctx.script)},"ProcessParametersComponent_Template"),directives:[common.O5,common.sg,ParameterSelectComponent],pipes:[ngx_translate_core.X$],styles:[""]});class ProcessPageModule{}__name(ProcessPageModule,"ProcessPageModule"),ProcessPageModule.\u0275fac=__name(function(t){return new(t||ProcessPageModule)},"ProcessPageModule_Factory"),ProcessPageModule.\u0275mod=core.oAB({type:ProcessPageModule}),ProcessPageModule.\u0275inj=core.cJS({providers:[ProcessBreadcrumbResolver,ProcessBreadcrumbsService],imports:[[ProcessPageRoutingModule,shared_module.m]]}),core.B6R(ProcessFormComponent,[fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.F,ScriptsSelectComponent,ProcessParametersComponent,router.rH,ScriptHelpComponent,common.O5,common.sg],[ngx_translate_core.X$])}};