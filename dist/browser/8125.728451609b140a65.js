"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8125],{53982:(T,x,s)=>{s.d(x,{a:()=>C});class C{constructor(f,m){this.text=f,this.url=m}}},84186:(T,x,s)=>{s.d(x,{t:()=>g});var C=s(38475),u=s(1272),f=s(5e3),m=s(55633);let g=(()=>{class c{constructor(v){this.breadcrumbService=v}resolve(v,e){const p=v.data.breadcrumbKey;if((0,C.xI)(p))throw new Error('You provided an i18nBreadcrumbResolver for url "'+v.url+"\" but no breadcrumbKey in the route's data");const I=(0,u.i)(v);return{provider:this.breadcrumbService,key:p,url:I}}}return c.\u0275fac=function(v){return new(v||c)(f.\u0275\u0275inject(m.d))},c.\u0275prov=f.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},55633:(T,x,s)=>{s.d(x,{d:()=>g});var C=s(53982),u=s(39646),f=s(5e3);let g=(()=>{class c{getBreadcrumbs(v,e){return(0,u.of)([new C.a(v+".breadcrumbs",e)])}}return c.\u0275fac=function(v){return new(v||c)},c.\u0275prov=f.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},68125:(T,x,s)=>{s.r(x),s.d(x,{ProcessPageModule:()=>Tt});var C=s(42501),u=s(74202),f=s(58451),m=s(46283),g=s(54004),c=s(63900),S=s(74229),v=s(18838),e=s(5e3),p=s(69808),I=s(41989),A=(s(15817),s(42310)),w=s(74616),z=s(55489),H=s(64025),K=s(86073),_=s(38475),h=s(86956);function J(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function G(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,J,2,1,"li",13),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"process.new.parameter.required.missing")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.missingParameters)}}const X=function(){return["/processes"]};let B=(()=>{class n{constructor(t,r,i,o,d){this.scriptService=t,this.notificationsService=r,this.translationService=i,this.requestService=o,this.router=d,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new A.A}submitForm(t){if((0,_.xb)(this.parameters)&&(this.parameters=[]),!this.validateForm(t)||this.isRequiredMissing())return;const r=this.parameters.map(i=>({name:i.name,value:this.checkValue(i)}));this.scriptService.invoke(this.selectedScript.id,r,this.files).pipe((0,m.hC)()).subscribe(i=>{if(i.hasSucceeded){const o=this.translationService.get("process.new.notification.success.title"),d=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(o,d),this.sendBack()}else{const o=this.translationService.get("process.new.notification.error.title"),d=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(o,d)}})}checkValue(t){return"object"==typeof t.value?(this.files=[...this.files,t.value],t.value.name):t.value}validateForm(t){let r=!0;return Object.keys(t.controls).forEach(i=>{t.controls[i].invalid&&(t.controls[i].markAsDirty(),r=!1)}),r}isRequiredMissing(){this.missingParameters=[];const t=this.parameters.map(i=>i.name),r=this.selectedScript.parameters.filter(i=>i.mandatory);for(const i of r)t.includes(i.name)||this.missingParameters.push(i.name);return this.missingParameters.length>0}sendBack(){this.requestService.removeByHrefSubstring("/processes"),this.router.navigateByUrl((0,K.dz)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(w.UY),e.\u0275\u0275directiveInject(z.T),e.\u0275\u0275directiveInject(h.sK),e.\u0275\u0275directiveInject(H.s),e.\u0275\u0275directiveInject(u.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},decls:19,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6"],[3,"ngSubmit"],["form","ngForm"],[3,"script","select"],[3,"initialParams","script","updateParameters"],[1,"btn","btn-light","float-left",3,"routerLink"],["type","submit",1,"btn","btn-light","float-right"],[3,"script"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"form",4,5),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(i);const d=e.\u0275\u0275reference(7);return r.submitForm(d)}),e.\u0275\u0275elementStart(8,"ds-scripts-select",6),e.\u0275\u0275listener("select",function(d){return r.selectedScript=d,r.parameters=void 0}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ds-process-parameters",7),e.\u0275\u0275listener("updateParameters",function(d){return r.parameters=d}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",8),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",9),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",3),e.\u0275\u0275element(17,"ds-script-help",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,G,5,4,"div",11),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,9,r.headerKey)," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialParams",r.parameters)("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(15,X)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,11,"process.new.cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,13,"process.new.submit")),e.\u0275\u0275advance(3),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.missingParameters.length>0))},styles:[""]}),n})();function y(n){return n}function W(n,a){if(1&n&&(e.\u0275\u0275element(0,"ds-process-form",2),e.\u0275\u0275pipe(1,"async")),2&n){const t=a.ngVar,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selectedScript",e.\u0275\u0275pipeBind1(1,2,r.script$))("parameters",t.parameters)}}function Y(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,W,2,4,"ds-process-form",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,1,t.fromExisting$))}}function Q(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-process-form",3),e.\u0275\u0275elementContainerEnd())}let Z=(()=>{class n{constructor(t,r,i){this.route=t,this.processService=r,this.linkService=i}ngOnInit(){const t=this.route.snapshot.queryParams.id;t&&(this.fromExisting$=this.processService.findById(t).pipe((0,m.Gp)()),this.script$=this.fromExisting$.pipe((0,g.U)(r=>this.linkService.resolveLink(r,(0,v.l)("script"))),(0,c.w)(r=>r.script),(0,m.Gp)()))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(f.n),e.\u0275\u0275directiveInject(S.M))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-new-process"]],decls:4,vars:6,consts:[[4,"ngIf"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,Y,3,3,"ng-container",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,Q,2,0,"ng-container",0),e.\u0275\u0275pipe(3,"async")),2&t&&(e.\u0275\u0275property("ngIf",r.fromExisting$&&e.\u0275\u0275pipeBind1(1,2,r.fromExisting$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.fromExisting$||!e.\u0275\u0275pipeBind1(3,4,r.fromExisting$)))},directives:[p.O5,I.g,B],pipes:[p.Ov],styles:[""]}),n})();var k=s(74293),q=s(20789),ee=s(94799),te=s(36877),ne=s(92396);function re(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}const D=function(n){return["/processes/",n]};function ae(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"a",11),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"td")(5,"a",11),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,re,2,1,"td",12),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()),2&n){const t=a.$implicit,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(18,D,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.processId),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(20,D,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(8,8,r.getEpersonName(t.userId))),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(11,10,t.startTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(14,14,t.endTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function ie(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-pagination",6),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",7)(4,"table",8)(5,"thead")(6,"tr")(7,"th",9),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",9),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",9),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th",9),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",9),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",9),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"tbody"),e.\u0275\u0275template(26,ae,17,22,"tr",10),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();let r,i,o;e.\u0275\u0275property("paginationOptions",t.pageConfig)("pageInfoState",null==(r=e.\u0275\u0275pipeBind1(1,12,t.processesRD$))?null:r.payload)("collectionSize",null==(i=e.\u0275\u0275pipeBind1(2,14,t.processesRD$))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,16,"process.overview.table.id")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,18,"process.overview.table.name")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,20,"process.overview.table.user")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,22,"process.overview.table.start")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,24,"process.overview.table.finish")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,26,"process.overview.table.status")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==(o=e.\u0275\u0275pipeBind1(27,28,t.processesRD$))||null==o.payload?null:o.payload.page)}}let se=(()=>{class n{constructor(t,r,i){this.processService=t,this.paginationService=r,this.ePersonService=i,this.config=Object.assign(new te.R,{elementsPerPage:20}),this.pageConfig=Object.assign(new k.r,{id:"po",pageSize:20}),this.dateFormat="yyyy-MM-dd HH:mm:ss"}ngOnInit(){this.setProcesses()}setProcesses(){this.processesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,c.w)(t=>this.processService.findAll(t)))}getEpersonName(t){return this.ePersonService.findById(t).pipe((0,m.Gp)(),(0,g.U)(r=>r.name))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(f.n),e.\u0275\u0275directiveInject(ee.N),e.\u0275\u0275directiveInject(q.k))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-overview"]],decls:11,vars:9,consts:[[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/processes/new",1,"btn","btn-lg","btn-success"],[1,"fas","fa-plus","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngVar"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275element(6,"i",4),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,ie,28,30,"ds-pagination",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd()),2&t){let i;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,"process.overview.title")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,5,"process.overview.new")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==(i=e.\u0275\u0275pipeBind1(10,7,r.processesRD$))||null==i.payload?null:i.payload.totalElements)>0)}},directives:[u.rH,p.O5,ne.Q,p.sg,u.yS,I.g],pipes:[h.X$,p.Ov,p.uU],encapsulation:2}),n})(),M=(()=>{class n{constructor(t){this.processService=t}resolve(t,r){return this.processService.findById(t.params.id,!1,!0,(0,v.l)("script")).pipe((0,m.hC)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(f.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var $=s(61135),oe=s(18505),b=s(95698),j=s(28746),le=s(36696),pe=s(82296),ce=s(20166),de=s(69972),me=s(60300),V=s(90918),ue=s(59130),ve=s(63782),fe=s(40520);const ge=["*"];let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},ngContentSelectors:ge,decls:4,vars:3,consts:[[1,"mt-4"]],template:function(t,r){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"h4",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,r.title)))},pipes:[h.X$],encapsulation:2}),n})();var he=s(19503),xe=s(27924),ye=s(95765);function Ce(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t?null:t.name," ",null==t?null:t.value,"")}}function Se(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",15),e.\u0275\u0275template(1,Ce,2,2,"div",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title","process.detail.arguments"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t?null:t.parameters)}}function Ie(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-file-download-link",20)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"dsFileSize"),e.\u0275\u0275elementEnd()()),2&n){const t=a.$implicit,r=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("bitstream",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.getFileName(t)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("(",e.\u0275\u0275pipeBind1(5,3,null==t?null:t.sizeBytes),")")}}function Pe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",18),e.\u0275\u0275template(1,Ie,6,5,"ds-file-download-link",19),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title","process.detail.output-files"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}function Ve(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Pe,2,2,"ds-process-detail-field",17),e.\u0275\u0275elementEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&(null==t?null:t.length)>0)}}function Ee(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",21),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.start-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.startTime,r.dateFormat,"UTC"))}}function Fe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",22),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.end-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.endTime,r.dateFormat,"UTC"))}}function Te(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",23),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.status")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function be(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(3).showProcessOutputLogs()}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.button")," "))}function Oe(n,a){1&n&&(e.\u0275\u0275element(0,"ds-loading",30),e.\u0275\u0275pipe(1,"translate")),2&n&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"process.detail.logs.loading"))}function we(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"pre",31),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.outputLogs$))}}function Be(n,a){1&n&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.none")," "))}function De(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",24),e.\u0275\u0275template(1,be,3,3,"button",25),e.\u0275\u0275template(2,Oe,2,3,"ds-loading",26),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,we,3,3,"pre",27),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,Be,3,3,"p",28),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();let i,o;e.\u0275\u0275property("title","process.detail.output"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.showOutputLogs&&null!=(null==t||null==t._links||null==t._links.output?null:t._links.output.href)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,5,r.retrievingOutputLogs$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.showOutputLogs&&(null==(i=e.\u0275\u0275pipeBind1(5,7,r.outputLogs$))?null:i.length)>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(7,9,r.retrievingOutputLogs$)&&r.showOutputLogs&&!e.\u0275\u0275pipeBind1(8,11,r.outputLogs$)||0==(null==(o=e.\u0275\u0275pipeBind1(9,13,r.outputLogs$))?null:o.length)||!t._links.output)}}const Me=function(n,a){return{id:n,name:a}},$e=function(n){return{id:n}};function je(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"h2",3),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div")(6,"button",4),e.\u0275\u0275element(7,"i",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"ds-process-detail-field",6)(11,"div"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,Se,2,2,"ds-process-detail-field",7),e.\u0275\u0275template(14,Ve,2,1,"div",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275template(16,Ee,5,8,"ds-process-detail-field",9),e.\u0275\u0275template(17,Fe,5,8,"ds-process-detail-field",10),e.\u0275\u0275template(18,Te,4,4,"ds-process-detail-field",11),e.\u0275\u0275template(19,De,10,15,"ds-process-detail-field",12),e.\u0275\u0275elementStart(20,"div",13)(21,"a",14),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd()()()),2&n){const t=a.ngVar,r=e.\u0275\u0275nextContext();let i;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,13,"process.detail.title",e.\u0275\u0275pureFunction2(22,Me,null==t?null:t.processId,null==t?null:t.scriptName))),e.\u0275\u0275advance(3),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction1(25,$e,null==t?null:t.processId)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,16,"process.detail.create")),e.\u0275\u0275advance(2),e.\u0275\u0275property("title","process.detail.script"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t?null:t.parameters)&&(null==t||null==t.parameters?null:t.parameters.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",null==(i=e.\u0275\u0275pipeBind1(15,18,r.filesRD$))||null==i.payload?null:i.payload.page),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t&&t.startTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.endTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.processStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.isProcessFinished(t)),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink","/processes"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,20,"process.detail.back"))}}let Le=(()=>{class n{constructor(t,r,i,o,d,F,bt,Ot){this.route=t,this.router=r,this.processService=i,this.bitstreamDataService=o,this.nameService=d,this.zone=F,this.authService=bt,this.http=Ot,this.AlertTypeEnum=me.N,this.outputLogs$=new $.X(void 0),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.showOutputLogs=!1,this.retrievingOutputLogs$=new $.X(!1),this.processRD$=this.route.data.pipe((0,g.U)(t=>t.process),(0,ue.Gh)(this.router,this.authService)),this.filesRD$=this.processRD$.pipe((0,m.Gp)(),(0,c.w)(t=>this.processService.getFiles(t.processId)))}getFileName(t){return t instanceof ce.t?this.nameService.getName(t):"unknown"}showProcessOutputLogs(){console.log("showProcessOutputLogs"),this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const t=this.processRD$.pipe((0,m.Gp)(),(0,c.w)(r=>this.bitstreamDataService.findByHref(r._links.output.href,!1)));this.outputLogFileUrl$=t.pipe((0,m.xw)(),(0,oe.b)(r=>{204===r.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,c.w)(r=>{const i=r.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,b.q)(1),(0,g.U)(o=>(0,_.Uh)(o)?new de.R(i,`?authentication-token=${o}`).toString():i))}))}),this.outputLogFileUrl$.pipe((0,b.q)(1),(0,c.w)(t=>this.getTextFile(t)),(0,j.x)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(t=>{this.outputLogs$.next(t)})}getTextFile(t){return this.http.get(t,{responseType:"text"}).pipe((0,j.x)(()=>{this.showOutputLogs=!0}))}isProcessFinished(t){return(0,_.Uh)(t)&&(0,_.Uh)(t.processStatus)&&(t.processStatus.toString()===V.N[V.N.COMPLETED].toString()||t.processStatus.toString()===V.N[V.N.FAILED].toString())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(u.F0),e.\u0275\u0275directiveInject(f.n),e.\u0275\u0275directiveInject(pe.J),e.\u0275\u0275directiveInject(ve._),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(le.e8),e.\u0275\u0275directiveInject(fe.eN))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/processes/new",1,"btn","btn-lg","btn-success",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-loading",3,"message"],[1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"]],template:function(t,r){if(1&t&&(e.\u0275\u0275template(0,je,24,27,"div",0),e.\u0275\u0275pipe(1,"async")),2&t){let i;e.\u0275\u0275property("ngVar",null==(i=e.\u0275\u0275pipeBind1(1,1,r.processRD$))?null:i.payload)}},directives:[I.g,u.rH,_e,p.O5,p.sg,he.q,xe.N,u.yS],pipes:[p.Ov,h.X$,ye.p,p.uU],encapsulation:2}),n})();var L=s(84186),Re=s(39646),Ne=s(53982);let R=(()=>{class n{getBreadcrumbs(t,r){return(0,Re.of)([new Ne.a(t.processId+" - "+t.scriptName,r)])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),N=(()=>{class n{constructor(t,r){this.breadcrumbService=t,this.processService=r}resolve(t,r){const i=t.params.id;return this.processService.findById(t.params.id,!0,!1,(0,v.l)("script")).pipe((0,m.xw)(),(0,m.xe)(),(0,g.U)(o=>{const d=r.url,F=d.substr(0,d.indexOf(i))+i;return{provider:this.breadcrumbService,key:o,url:F}}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(R),e.\u0275\u0275inject(f.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var Ue=s(29714);let Ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[M],imports:[[u.Bz.forChild([{path:"",resolve:{breadcrumb:L.t},data:{breadcrumbKey:"process.overview"},canActivate:[Ue.J],children:[{path:"",component:se,data:{title:"process.overview.title"}},{path:"new",component:Z,resolve:{breadcrumb:L.t},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:Le,resolve:{process:M,breadcrumb:N}}]}])]]}),n})();var ze=s(39300),He=s(71884),l=s(93075);function Ke(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"option",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function Je(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.select-script.required")," "))}function Ge(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,Je,3,3,"div",9),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}function Xe(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"label",2),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",3,4),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().selectedScript=i}),e.\u0275\u0275elementStart(6,"option",5),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Ke,2,2,"option",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Ge,2,1,"div",7),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,"process.new.select-script")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",r.selectedScript),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,8,"process.new.select-script.placeholder")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(10,10,r.scripts$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.invalid&&(t.dirty||t.touched))}}const U="script";let We=(()=>{class n{constructor(t,r,i){this.scriptService=t,this.router=r,this.route=i,this.select=new e.EventEmitter}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,m.xw)(),(0,m.xe)(),(0,g.U)(t=>t.page)),this.routeSub=this.route.queryParams.pipe((0,ze.h)(t=>(0,_.xI)(t.id)),(0,g.U)(t=>t[U]),(0,He.x)(),(0,c.w)(t=>this.scripts$.pipe((0,b.q)(1),(0,g.U)(r=>r.find(i=>i.id===t))))).subscribe(t=>{this._selectedScript=t,this.select.emit(t)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(t){this.router.navigate([],{queryParams:{[U]:t}})}set script(t){this._selectedScript=t}ngOnDestroy(){(0,_.Uh)(this.routeSub)&&this.routeSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(w.UY),e.\u0275\u0275directiveInject(u.F0),e.\u0275\u0275directiveInject(u.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}])],decls:2,vars:3,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModel","ngModelChange"],["script","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,Xe,12,12,"div",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,r.scripts$))},directives:[p.O5,l.EJ,l.Q7,l.JJ,l.On,l.YN,l.Kr,p.sg],pipes:[p.Ov,h.X$],styles:[""]}),n})();var P=(()=>{return(n=P||(P={})).STRING="String",n.DATE="date",n.BOOLEAN="boolean",n.FILE="InputStream",n.OUTPUT="OutputStream",P;var n})();function Ye(n,a){1&n&&e.\u0275\u0275elementContainer(0)}function Qe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",4),e.\u0275\u0275text(2),e.\u0275\u0275template(3,Ye,1,0,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=a.$implicit;e.\u0275\u0275nextContext();const r=e.\u0275\u0275reference(8);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.name," ",t.nameLong," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function Ze(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function ke(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function qe(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function et(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.file"),">"))}function tt(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275template(1,Ze,3,3,"span",7),e.\u0275\u0275template(2,ke,3,3,"span",7),e.\u0275\u0275template(3,qe,3,3,"span",7),e.\u0275\u0275template(4,et,3,3,"span",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.type,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE)}}let nt=(()=>{class n{constructor(){this.parameterTypes=P}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-script-help"]],inputs:{script:"script"},decls:9,vars:3,consts:[[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],["type",""],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"table",1),e.\u0275\u0275template(6,Qe,6,5,"tr",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,tt,5,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==r.script?null:r.script.parameters))},directives:[p.sg,p.tP,p.RF,p.n9],pipes:[h.X$],styles:[""]}),n})();var O=s(92952);let E=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();function rt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function at(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,rt,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let it=(()=>{class n extends E{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(o){return r.setValue(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,at,2,1,"div",2)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","string-value-",r.index,"")("id","string-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[l.Fj,l.Q7,l.JJ,l.On,p.O5],pipes:[h.X$],styles:[""]}),n})();function st(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function ot(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,st,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let lt=(()=>{class n extends E{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(o){return r.setValue(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,ot,2,1,"div",2)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","date-value-",r.index,"")("id","date-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[l.Fj,l.Q7,l.JJ,l.On,p.O5],pipes:[h.X$],styles:[""]}),n})();var pt=s(97760),ct=s(86322);function dt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.file.required")," "))}function mt(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,dt,3,3,"div",7),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let ut=(()=>{class n extends E{setFile(t){this.fileObject=t.length>0?t[0]:void 0,this.updateValue.emit(this.fileObject)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-file-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-light"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"name","id","ngModel","ngModelChange"],["file","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"label",0)(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"input",3,4),e.\u0275\u0275listener("ngModelChange",function(o){return r.setFile(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,mt,2,1,"div",5)),2&t){const i=e.\u0275\u0275reference(7);e.\u0275\u0275propertyInterpolate1("for","file-upload-",r.index,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,7,"process.new.parameter.file.upload-button")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==r.fileObject?null:r.fileObject.name),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","file-upload-",r.index,"")("id","file-upload-",r.index,""),e.\u0275\u0275property("ngModel",r.fileObject),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[pt.k,l.Fj,ct.C,l.JJ,l.On,p.O5],pipes:[h.X$],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})(),vt=(()=>{class n extends E{ngOnInit(){this.updateValue.emit(!0)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-boolean-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","hidden","value","true",3,"name","id"]],template:function(t,r){1&t&&e.\u0275\u0275element(0,"input",0),2&t&&e.\u0275\u0275propertyInterpolate1("name","boolean-value-",r.index,"")("id","boolean-value-",r.index,"")},styles:[""]}),n})();function ft(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function gt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function _t(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-date-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function ht(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-file-value-input",4),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}function xt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-boolean-value-input",4),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}let yt=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter,this.parameterTypes=P}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}])],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"initialValue","index","updateValue"],[3,"index","updateValue"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,ft,1,2,"ds-string-value-input",1),e.\u0275\u0275template(2,gt,1,2,"ds-string-value-input",1),e.\u0275\u0275template(3,_t,1,2,"ds-date-value-input",1),e.\u0275\u0275template(4,ht,1,1,"ds-file-value-input",2),e.\u0275\u0275template(5,xt,1,1,"ds-boolean-value-input",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngSwitch",null==r.parameter?null:r.parameter.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.BOOLEAN))},directives:[p.RF,p.n9,it,lt,ut,vt],styles:[""]}),n})();function Ct(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"option",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nameLong||t.name," ")}}function St(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return i.removeParameter.emit(i.parameterValue)}),e.\u0275\u0275element(1,"span",9),e.\u0275\u0275elementEnd()}}function It(n,a){1&n&&e.\u0275\u0275element(0,"span",10)}let Pt=(()=>{class n{constructor(){this.parameterValue=new O.N,this.removeParameter=new e.EventEmitter,this.changeParameter=new e.EventEmitter}get selectedScriptParameter(){return this.parameters.find(t=>t.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(t){this.parameterValue.name=t,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(t){this.parameterValue.value=t,this.changeParameter.emit(this.parameterValue)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}])],decls:9,vars:9,consts:[[1,"form-row","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"name","ngModel","ngModelChange"],["param","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col",3,"initialValue","parameter","index","updateValue"],["class","btn btn-light col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-light","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"select",1,2),e.\u0275\u0275listener("ngModelChange",function(o){return r.selectedParameter=o}),e.\u0275\u0275elementStart(3,"option",3),e.\u0275\u0275text(4,"Add a parameter..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ct,2,2,"option",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"ds-parameter-value-input",5),e.\u0275\u0275listener("updateValue",function(o){return r.selectedParameterValue=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,St,2,0,"button",6),e.\u0275\u0275template(8,It,1,0,"span",7),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","parameter-",r.index,""),e.\u0275\u0275property("ngModel",r.selectedParameter),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.parameters),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialValue",r.parameterValue.value)("parameter",r.selectedScriptParameter)("index",r.index),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.removable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.removable))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,p.sg,yt,p.O5],styles:[""]}),n})();function Vt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-parameter-select",3),e.\u0275\u0275listener("removeParameter",function(){const o=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).removeParameter(o)})("changeParameter",function(i){const d=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).updateParameter(i,d)}),e.\u0275\u0275elementEnd()}if(2&n){const t=a.$implicit,r=a.index,i=a.last,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("parameters",o.script.parameters)("parameterValue",t)("removable",!i)("index",r)}}function Et(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Vt,1,4,"ds-parameter-select",2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"process.new.select-parameters")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.parameterValues)}}let Ft=(()=>{class n{constructor(){this.updateParameters=new e.EventEmitter}ngOnInit(){(0,_.Uh)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(t){t.script&&this.initParameters()}initParameters(){(0,_.Uh)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(t,r){this.parameterValues[r]=t,r===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(i=>(0,_.Uh)(i.name)))}removeParameter(t){this.parameterValues=this.parameterValues.filter((r,i)=>i!==t),this.updateParameters.emit(this.parameterValues.filter(r=>(0,_.Uh)(r.name)))}initializeParameter(){(0,_.Uh)(this.script)&&(this.parameterValues=this.script.parameters.filter(t=>t.mandatory).map(t=>Object.assign(new O.N,{name:t.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new O.N]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:y,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter"]],template:function(t,r){1&t&&e.\u0275\u0275template(0,Et,5,4,"div",0),2&t&&e.\u0275\u0275property("ngIf",r.script)},directives:[p.O5,p.sg,Pt],pipes:[h.X$],styles:[""]}),n})(),Tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[N,R],imports:[[Ae,C.m]]}),n})();e.\u0275\u0275setComponentScope(B,[l._Y,l.JL,l.F,We,Ft,u.rH,nt,p.O5,p.sg],[h.X$])}}]);