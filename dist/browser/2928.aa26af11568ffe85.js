"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[2928],{82928:(O,c,o)=>{o.d(c,{V:()=>M});var e=o(5e3),n=o(8108),i=o(38475),u=o(20789),_=o(55489),f=o(54004),d=o(46283),l=o(86956),h=o(84561),E=o(69808),P=o(50358),m=o(93075);function g(r,a){if(1&r&&e.\u0275\u0275element(0,"ds-form",5),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId",t.FORM_PREFIX)("formModel",t.formModel)("formGroup",t.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function v(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.FORM_PREFIX+"error.password-length"))}}function I(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.FORM_PREFIX+"error.matching-passwords"))}}function y(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.FORM_PREFIX+"error.empty-password"))}}let M=(()=>{class r{constructor(t,s,p,C){this.formService=t,this.translate=s,this.epersonService=p,this.notificationsService=C,this.isInvalid=new e.EventEmitter,this.passwordValue=new e.EventEmitter,this.formModel=[new n.b1u({id:"password",name:"password",inputType:"password"}),new n.b1u({id:"passwordrepeat",name:"passwordrepeat",inputType:"password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual,this.checkPasswordLength]}:{validators:[this.checkPasswordsEqual,this.checkPasswordLength,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,d.ig)(300),(0,f.U)(t=>"VALID"!==t)).subscribe(t=>this.isInvalid.emit(t))),this.subs.push(this.formGroup.valueChanges.pipe((0,d.ig)(300)).subscribe(t=>{this.passwordValue.emit(t.password)}))}updateFieldTranslations(){this.formModel.forEach(t=>{t.label=this.translate.instant(this.FORM_PREFIX+"label."+t.id)})}checkPasswordsEqual(t){return t.get("password").value===t.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordLength(t){const s=t.get("password").value;return(0,i.xb)(s)||s.length>=6?null:{notLongEnough:!0}}checkPasswordEmpty(t){const s=t.get("password").value;return(0,i.xb)(s)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(t=>(0,i.Uh)(t)).forEach(t=>t.unsubscribe())}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(n.w1X),e.\u0275\u0275directiveInject(l.sK),e.\u0275\u0275directiveInject(u.k),e.\u0275\u0275directiveInject(_.T))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue"},decls:7,vars:8,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notLongEnough","class","container-fluid text-danger",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notLongEnough",1,"container-fluid","text-danger"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(t,s){1&t&&(e.\u0275\u0275elementStart(0,"ds-alert",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,g,1,5,"ds-form",1),e.\u0275\u0275template(4,v,3,3,"div",2),e.\u0275\u0275template(5,I,3,3,"div",3),e.\u0275\u0275template(6,y,3,3,"div",4)),2&t&&(e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,6,s.FORM_PREFIX+"info")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.formModel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.formGroup.hasError("notLongEnough")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.formGroup.hasError("notSame")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(s.formGroup.dirty||s.formGroup.touched)&&s.formGroup.hasError("emptyPassword")))},directives:[h.w,E.O5,P.U,m.JL,m.sg],pipes:[l.X$],encapsulation:2}),r})()}}]);