(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7976,3429],{86785:(b,h,o)=>{"use strict";o.d(h,{M:()=>s});var e=o(5e3),p=o(61135),n=o(39841),f=o(36696),m=o(27139),r=o(64025),c=o(97416),_=o(42851),a=o(38475),O=o(55489),t=o(96130),B=o(54240),x=o(46283),D=o(8108),y=o(86956),u=o(41989),d=o(69808),T=o(7981),F=o(50358);function L(l,v){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(4).deleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",16),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete.title"))}}function C(l,v){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(4).undoDeleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",18),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete-undo.title"))}}function A(l,v){if(1&l&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275template(1,L,3,3,"button",13),e.\u0275\u0275template(2,C,3,3,"button",14),e.\u0275\u0275elementEnd()),2&l){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.markLogoForDeletion),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.markLogoForDeletion)}}const M=function(l){return{"alert-danger":l}};function $(l,v){if(1&l&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",1)(2,"div",8),e.\u0275\u0275element(3,"ds-comcol-page-logo",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275template(5,A,3,2,"div",11),e.\u0275\u0275elementEnd()()()),2&l){const i=e.\u0275\u0275nextContext().ngVar,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,M,I.markLogoForDeletion)),e.\u0275\u0275advance(3),e.\u0275\u0275property("logo",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i)}}function V(l,v){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-uploader",20),e.\u0275\u0275listener("onCompleteItem",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).onCompleteItem()})("onUploadError",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).onUploadError()}),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("dropMsg",i.type.value+".edit.logo.upload")("dropOverDocumentMsg",i.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",i.uploadFilesOptions)}}function H(l,v){if(1&l&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,V,1,4,"ds-uploader",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&l){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,i.initializedUploaderOptions))}}function g(l,v){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$,6,5,"div",5),e.\u0275\u0275template(2,H,3,3,"div",6),e.\u0275\u0275elementContainerEnd()),2&l){const i=v.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i)}}function S(l,v){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-form",21),e.\u0275\u0275listener("submitForm",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().onSubmit()}),e.\u0275\u0275elementStart(1,"button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().back.emit()}),e.\u0275\u0275element(2,"i",23),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId","comcol-form-id")("formModel",i.formModel)("displayCancel",!1),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,i.type.value+".edit.return")," ")}}let s=(()=>{class l{constructor(i,I,U,E,W,P){this.formService=i,this.translate=I,this.notificationsService=U,this.authService=E,this.requestService=W,this.objectCache=P,this.LABEL_KEY_PREFIX=".form.",this.ERROR_KEY_PREFIX=".form.errors.",this.uploadFilesOptions=Object.assign(new t.n,{autoUpload:!1}),this.submitForm=new e.EventEmitter,this.back=new e.EventEmitter,this.finish=new e.EventEmitter,this.initializedUploaderOptions=new p.X(!1),this.markLogoForDeletion=!1,this.subs=[]}ngOnInit(){this.formModel.forEach(i=>{i.value=this.dso.firstMetadataValue(i.name)}),this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),(0,a.Uh)(this.dso.id)?this.subs.push((0,n.a)([this.dsoService.getLogoEndpoint(this.dso.id),this.dso.logo]).subscribe(([i,I])=>{this.uploadFilesOptions.url=i,this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),(0,a.Uh)(I.payload)&&(this.uploadFilesOptions.method=c.a.PUT),this.initializedUploaderOptions.next(!0)})):(this.uploadFilesOptions.url="placeholder",this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.initializedUploaderOptions.next(!0))}onSubmit(){this.markLogoForDeletion&&(0,a.Uh)(this.dso.id)&&(0,a.Uh)(this.dso._links.logo)&&this.dsoService.deleteLogo(this.dso).pipe((0,x.hC)()).subscribe(E=>{E.hasSucceeded?this.notificationsService.success(this.translate.get(this.type.value+".edit.logo.notifications.delete.success.title"),this.translate.get(this.type.value+".edit.logo.notifications.delete.success.content")):this.notificationsService.error(this.translate.get(this.type.value+".edit.logo.notifications.delete.error.title"),E.errorMessage),this.dso.logo=void 0,this.uploadFilesOptions.method=c.a.POST,this.finish.emit()});const i={};this.formModel.forEach(E=>{const W={value:E.value,language:null};i.hasOwnProperty(E.name)?i[E.name].push(W):i[E.name]=[W]});const I=Object.assign({},this.dso,{metadata:Object.assign(Object.assign({},this.dso.metadata),i),type:_.S.type}),U=[];this.formModel.forEach(E=>{E.value!==this.dso.firstMetadataValue(E.name)&&U.push({op:"replace",path:`/metadata/${E.name}`,value:{value:E.value,language:null}})}),this.submitForm.emit({dso:I,uploader:(0,a.Uh)(this.uploaderComponent)?this.uploaderComponent.uploader:void 0,deleteLogo:this.markLogoForDeletion,operations:U})}updateFieldTranslations(){this.formModel.forEach(i=>{i.label=this.translate.instant(this.type.value+this.LABEL_KEY_PREFIX+i.id),(0,a.UE)(i.validators)&&(i.errorMessages={},Object.keys(i.validators).forEach(I=>{i.errorMessages[I]=this.translate.instant(this.type.value+this.ERROR_KEY_PREFIX+i.id+"."+I)}))})}deleteLogo(){this.markLogoForDeletion=!0}undoDeleteLogo(){this.markLogoForDeletion=!1}refreshCache(){this.requestService.removeByHrefSubstring(this.dso._links.self.href),this.objectCache.remove(this.dso._links.self.href)}onCompleteItem(){(0,a.Uh)(this.dso.id)&&this.refreshCache(),this.notificationsService.success(null,this.translate.get(this.type.value+".edit.logo.notifications.add.success")),this.finish.emit()}onUploadError(){this.notificationsService.error(null,this.translate.get(this.type.value+".edit.logo.notifications.add.error")),this.finish.emit()}ngOnDestroy(){this.subs.filter(i=>(0,a.Uh)(i)).forEach(i=>i.unsubscribe())}}return l.\u0275fac=function(i){return new(i||l)(e.\u0275\u0275directiveInject(D.w1X),e.\u0275\u0275directiveInject(y.sK),e.\u0275\u0275directiveInject(O.T),e.\u0275\u0275directiveInject(f.e8),e.\u0275\u0275directiveInject(r.s),e.\u0275\u0275directiveInject(m.a))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-comcol-form"]],viewQuery:function(i,I){if(1&i&&e.\u0275\u0275viewQuery(B.B,5),2&i){let U;e.\u0275\u0275queryRefresh(U=e.\u0275\u0275loadQuery())&&(I.uploaderComponent=U.first)}},inputs:{dso:"dso"},outputs:{submitForm:"submitForm",back:"back",finish:"finish"},decls:9,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function(i,I){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,g,3,2,"ng-container",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,S,5,6,"ds-form",4)),2&i){let U;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,I.type.value+".edit.logo.label")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",null==(U=e.\u0275\u0275pipeBind1(7,5,null==I.dso?null:I.dso.logo))?null:U.payload),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",I.formModel)}},directives:[u.g,d.O5,d.mk,T.e,B.B,F.U],pipes:[y.X$,d.Ov],styles:[""]}),l})()},52547:(b,h,o)=>{"use strict";o.d(h,{k:()=>D});var e=o(95698),p=o(86099),n=o(22750),f=o(30858),m=o(9168),r=o(46283),c=o(38475),_=o(55489),a=o(73529),O=o(64025),t=o(5e3),B=o(74202),x=o(86956);let D=(()=>{class y{constructor(d,T,F,L,C,A,M){this.dsoDataService=d,this.parentDataService=T,this.routeService=F,this.router=L,this.notificationsService=C,this.translate=A,this.requestService=M}ngOnInit(){this.parentUUID$=this.routeService.getQueryParameterValue("parent"),this.parentUUID$.pipe((0,e.q)(1)).subscribe(d=>{(0,c.UE)(d)&&(this.parentRD$=this.parentDataService.findById(d))})}onSubmit(d){const T=d.dso,F=d.uploader;this.parentUUID$.pipe((0,e.q)(1),(0,p.z)(L=>{const C=L?[new a.g("parent",L)]:[];return this.dsoDataService.create(T,...C).pipe((0,r.Gp)())})).subscribe(L=>{(0,c.pT)(L)&&(this.newUUID=L.uuid,F.queue.length>0?this.dsoDataService.getLogoEndpoint(this.newUUID).pipe((0,e.q)(1)).subscribe(C=>{F.options.url=C,F.uploadAll()}):this.navigateToNewPage(),this.dsoDataService.refreshCache(L)),this.notificationsService.success(null,this.translate.get(this.type.value+".create.notifications.success"))})}navigateToHome(){this.router.navigate(["/home"])}navigateToNewPage(){(0,c.Uh)(this.newUUID)&&this.router.navigate([this.frontendURL+this.newUUID])}}return y.\u0275fac=function(d){return new(d||y)(t.\u0275\u0275directiveInject(n.C),t.\u0275\u0275directiveInject(f.w),t.\u0275\u0275directiveInject(m.MZ),t.\u0275\u0275directiveInject(B.F0),t.\u0275\u0275directiveInject(_.T),t.\u0275\u0275directiveInject(x.sK),t.\u0275\u0275directiveInject(O.s))},y.\u0275cmp=t.\u0275\u0275defineComponent({type:y,selectors:[["ds-create-comcol"]],decls:0,vars:0,template:function(d,T){},encapsulation:2}),y})()},61194:(b,h,o)=>{"use strict";o.d(h,{M:()=>O});var e=o(61135),p=o(50590),n=o(54004),f=o(55489),m=o(46283),r=o(22750),c=o(5e3),_=o(74202),a=o(86956);let O=(()=>{class t{constructor(x,D,y,u,d){this.dsoDataService=x,this.router=D,this.route=y,this.notifications=u,this.translate=d,this.processing$=new e.X(!1)}ngOnInit(){this.dsoRD$=this.route.data.pipe((0,p.P)(),(0,n.U)(x=>x.dso))}onConfirm(x){this.processing$.next(!0),this.dsoDataService.delete(x.id).pipe((0,m.hC)()).subscribe(D=>{if(D.hasSucceeded){const y=this.translate.instant(x.type+".delete.notification.success");this.notifications.success(y)}else{const y=this.translate.instant(x.type+".delete.notification.fail");this.notifications.error(y)}this.router.navigate(["/"])})}onCancel(x){this.router.navigate([this.frontendURL+"/"+x.uuid+"/edit"])}}return t.\u0275fac=function(x){return new(x||t)(c.\u0275\u0275directiveInject(r.C),c.\u0275\u0275directiveInject(_.F0),c.\u0275\u0275directiveInject(_.gz),c.\u0275\u0275directiveInject(f.T),c.\u0275\u0275directiveInject(a.sK))},t.\u0275cmp=c.\u0275\u0275defineComponent({type:t,selectors:[["ds-delete-comcol"]],decls:0,vars:0,template:function(x,D){},encapsulation:2}),t})()},58046:(b,h,o)=>{"use strict";o.d(h,{b:()=>H});var e=o(61135),p=o(17967),n=o(63900),f=o(39300),m=o(54004),r=o(46283),c=o(64025),_=o(71725),a=o(38475),O=o(55489),t=o(5e3),B=o(86956),x=o(41989),D=o(84561),y=o(69808),u=o(27924),d=o(74202);function T(g,S){1&g&&t.\u0275\u0275element(0,"ds-loading")}function F(g,S){1&g&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.no-group")," "))}function L(g,S){if(1&g&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&g){const s=t.\u0275\u0275nextContext(2);let l;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit."+(null==(l=t.\u0275\u0275pipeBind1(3,3,s.comcolRole$))?null:l.name)+".anonymous-group")," ")}}function C(g,S){if(1&g&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&g){const s=t.\u0275\u0275nextContext().ngVar,l=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("routerLink",t.\u0275\u0275pipeBind1(1,2,l.editGroupLink$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",s.name," ")}}function A(g,S){if(1&g){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275element(1,"i",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&g&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.create")," "))}function M(g,S){if(1&g){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&g&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.restrict")," "))}function $(g,S){if(1&g){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).delete()}),t.\u0275\u0275element(1,"i",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&g&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.delete")," "))}function V(g,S){if(1&g&&(t.\u0275\u0275elementStart(0,"div",1)(1,"h5",2),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3)(5,"ds-alert",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6),t.\u0275\u0275template(11,T,1,0,"ds-loading",7),t.\u0275\u0275pipe(12,"async"),t.\u0275\u0275template(13,F,3,3,"div",7),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275template(15,L,4,5,"div",7),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275template(17,C,3,4,"a",8),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275template(20,A,4,3,"button",10),t.\u0275\u0275pipe(21,"async"),t.\u0275\u0275template(22,M,3,3,"button",11),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275template(24,$,4,3,"button",12),t.\u0275\u0275pipe(25,"async"),t.\u0275\u0275elementEnd()()()),2&g){const s=t.\u0275\u0275nextContext();let l;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,10,s.roleName$)," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("type","alert-info"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,12,"comcol-role.edit."+(null==(l=t.\u0275\u0275pipeBind1(8,14,s.comcolRole$))?null:l.name)+".description")),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!t.\u0275\u0275pipeBind1(12,16,s.groupRD$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(14,18,s.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(16,20,s.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(18,22,s.hasCustomGroup$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(21,24,s.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(23,26,s.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(25,28,s.hasCustomGroup$))}}let H=(()=>{class g{constructor(s,l,v,i){this.requestService=s,this.groupService=l,this.notificationsService=v,this.translateService=i,this.comcolRole$=new e.X(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(s){this.comcolRole$.next(s)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,r.hC)()).subscribe(s=>{s.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,n.w)(l=>this.translateService.get("comcol-role.edit.create.error.title",{role:l}))),`${s.statusCode} ${s.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,r.hC)()).subscribe(s=>{s.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,n.w)(l=>this.translateService.get("comcol-role.edit.delete.error.title",{role:l}))),s.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,f.h)(s=>(0,a.Uh)(s)),(0,n.w)(s=>this.groupService.findByHref(s.href)),(0,r.f1)()),this.group$=this.groupRD$.pipe((0,m.U)(s=>{if((0,a.Uh)(s.payload))return s.payload})),this.editGroupLink$=this.group$.pipe((0,m.U)(s=>(0,a.Uh)(s)?(0,_.EV)(s.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,m.U)(s=>(0,a.xI)(s))),this.hasAnonymousGroup$=this.group$.pipe((0,m.U)(s=>(0,a.Uh)(s)&&"Anonymous"===s.name)),this.hasCustomGroup$=this.group$.pipe((0,m.U)(s=>(0,a.Uh)(s)&&"Anonymous"!==s.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}}return g.\u0275fac=function(s){return new(s||g)(t.\u0275\u0275directiveInject(c.s),t.\u0275\u0275directiveInject(p.O),t.\u0275\u0275directiveInject(O.T),t.\u0275\u0275directiveInject(B.sK))},g.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(s,l){if(1&s&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,V,26,30,"div",0),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&s){let v;t.\u0275\u0275classMapInterpolate1("card p-2 m-3 ",null==(v=t.\u0275\u0275pipeBind1(1,4,l.comcolRole$))?null:v.name,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngVar",t.\u0275\u0275pipeBind1(3,6,l.group$))}},directives:[x.g,D.w,y.O5,u.N,d.yS],pipes:[y.Ov,B.X$],styles:[""]}),g})()},35897:(b,h,o)=>{"use strict";o.d(h,{x:()=>r});var e=o(50590),p=o(54004),n=o(38475),f=o(5e3),m=o(74202);let r=(()=>{class c{constructor(a,O){this.router=a,this.route=O,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(a=>a.path).filter(a=>(0,n.UE)(a)),this.dsoRD$=this.route.data.pipe((0,e.P)(),(0,p.U)(a=>a.dso))}getPageUrl(a){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(a=>a.path===this.currentPage).data.hideReturnButton}}return c.\u0275fac=function(a){return new(a||c)(f.\u0275\u0275directiveInject(m.F0),f.\u0275\u0275directiveInject(m.gz))},c.\u0275cmp=f.\u0275\u0275defineComponent({type:c,selectors:[["ds-edit-comcol"]],decls:0,vars:0,template:function(a,O){},encapsulation:2}),c})()},13365:(b,h,o)=>{"use strict";o.r(h),o.d(h,{ComcolPageBrowseByComponent:()=>x});var e=o(54004),p=o(34736),n=o(40011),f=o(46283),m=o(47205),r=o(5e3),c=o(74202),_=o(69808),a=o(93075),O=o(86956);function t(D,y){if(1&D&&(r.\u0275\u0275elementStart(0,"a",8),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd()),2&D){const u=y.$implicit;r.\u0275\u0275property("routerLink",u.routerLink)("queryParams",u.params),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,3,u.label))}}function B(D,y){if(1&D&&(r.\u0275\u0275elementStart(0,"option",9),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"translate"),r.\u0275\u0275elementEnd()),2&D){const u=y.$implicit,d=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngValue",u.id),r.\u0275\u0275attribute("selected",r.\u0275\u0275pipeBind1(1,3,d.currentOptionId$)===u.id?"selected":null),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(3,5,u.label))}}let x=(()=>{class D{constructor(u,d,T){this.route=u,this.router=d,this.browseService=T}ngOnInit(){this.browseService.getBrowseDefinitions().pipe((0,f.hC)()).subscribe(u=>{u.hasSucceeded&&(this.allOptions=u.payload.page.map(d=>({id:d.id,label:`browse.comcol.by.${d.id}`,routerLink:`/browse/${d.id}`,params:{scope:this.id}})),"collection"===this.contentType?this.allOptions=[{id:this.id,label:"collection.page.browse.recent.head",routerLink:(0,n.MI)(this.id)},...this.allOptions]:"community"===this.contentType&&(this.allOptions=[{id:this.id,label:"community.all-lists.head",routerLink:(0,p.Ke)(this.id)},...this.allOptions]))}),this.currentOptionId$=this.route.params.pipe((0,e.U)(u=>u.id))}onSelectChange(u){const d=this.allOptions.find(T=>T.id===u);this.router.navigate([d.routerLink],{queryParams:d.params})}}return D.\u0275fac=function(u){return new(u||D)(r.\u0275\u0275directiveInject(c.gz),r.\u0275\u0275directiveInject(c.F0),r.\u0275\u0275directiveInject(m.I))},D.\u0275cmp=r.\u0275\u0275defineComponent({type:D,selectors:[["ds-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},decls:11,vars:8,consts:[[1,"comcol-browse-label","h5"],["aria-label","Browse Community or Collection",1,"comcol-browse","mb-4"],[1,"d-none","d-sm-block"],[1,"list-group","list-group-horizontal"],["class","list-group-item","routerLinkActive","active",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"d-block","d-sm-none"],["name","browse-type","aria-label","Browse Community or Collection",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item",3,"routerLink","queryParams"],[3,"ngValue"]],template:function(u,d){1&u&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"nav",1)(4,"div",2)(5,"div",3),r.\u0275\u0275template(6,t,3,5,"a",4),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",5)(8,"select",6),r.\u0275\u0275listener("ngModelChange",function(F){return d.onSelectChange(F)}),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275template(10,B,4,7,"option",7),r.\u0275\u0275elementEnd()()()),2&u&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,4,"browse.comcol.head")),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",d.allOptions),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",r.\u0275\u0275pipeBind1(9,6,d.currentOptionId$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",d.allOptions))},directives:[_.sg,c.yS,c.Od,a.EJ,a.JJ,a.On,a.YN,a.Kr],pipes:[O.X$,_.Ov],styles:[""]}),D})()},84983:(b,h,o)=>{"use strict";o.d(h,{g:()=>f});var e=o(79094),p=o(5e3);function n(m,r){}let f=(()=>{class m extends e.F{constructor(){super(...arguments),this.inAndOutputNames=["id","contentType"]}getComponentName(){return"ComcolPageBrowseByComponent"}importThemedComponent(c){return o(1266)(`./${c}/app/shared/comcol-page-browse-by/comcol-page-browse-by.component`)}importUnthemedComponent(){return Promise.resolve().then(o.bind(o,13365))}}return m.\u0275fac=function(){let r;return function(_){return(r||(r=p.\u0275\u0275getInheritedFactory(m)))(_||m)}}(),m.\u0275cmp=p.\u0275\u0275defineComponent({type:m,selectors:[["ds-themed-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},features:[p.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["vcr",""]],template:function(c,_){1&c&&p.\u0275\u0275template(0,n,0,0,"ng-template",null,0,p.\u0275\u0275templateRefExtractor)},encapsulation:2}),m})()},67216:(b,h,o)=>{"use strict";o.d(h,{v:()=>_});var e=o(5e3),p=o(69808),n=o(86956);function f(a,O){if(1&a&&(e.\u0275\u0275elementStart(0,"h2"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.title))}}function m(a,O){if(1&a&&e.\u0275\u0275element(0,"div",4),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("innerHtml",t.content,e.\u0275\u0275sanitizeHtml)}}function r(a,O){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.content)}}function c(a,O){if(1&a&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,f,3,3,"h2",2),e.\u0275\u0275template(2,m,1,1,"div",3),e.\u0275\u0275template(3,r,2,1,"div",2),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.hasInnerHtml),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.hasInnerHtml)}}let _=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["ds-comcol-page-content"]],inputs:{title:"title",content:"content",hasInnerHtml:"hasInnerHtml"},decls:1,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],[4,"ngIf"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"]],template:function(t,B){1&t&&e.\u0275\u0275template(0,c,4,3,"div",0),2&t&&e.\u0275\u0275property("ngIf",B.content)},directives:[p.O5],pipes:[n.X$],styles:[""]}),a})()},62017:(b,h,o)=>{"use strict";o.d(h,{U:()=>f});var e=o(5e3),p=o(69808);function n(m,r){if(1&m&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&m){const c=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(c.name)}}let f=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["ds-comcol-page-header"]],inputs:{name:"name"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(c,_){1&c&&e.\u0275\u0275template(0,n,2,1,"h1",0),2&c&&e.\u0275\u0275property("ngIf",_.name)},directives:[p.O5],styles:[""]}),m})()},7981:(b,h,o)=>{"use strict";o.d(h,{e:()=>m}),o(65742);var p=o(5e3),n=o(69808);function f(r,c){if(1&r){const _=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",1)(1,"img",2),p.\u0275\u0275listener("error",function(O){return p.\u0275\u0275restoreView(_),p.\u0275\u0275nextContext().errorHandler(O)}),p.\u0275\u0275elementEnd()()}if(2&r){const _=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("src",_.logo._links.content.href,p.\u0275\u0275sanitizeUrl),p.\u0275\u0275attribute("alt",_.alternateText?_.alternateText:null)}}let m=(()=>{class r{constructor(){this.holderSource="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2293%22%20height%3D%22120%22%20viewBox%3D%220%200%2093%20120%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F93x120%3Ftext%3DNo%20Thumbnail%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1543e460b05%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1543e460b05%22%3E%3Crect%20width%3D%2293%22%20height%3D%22120%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2235.6171875%22%20y%3D%2257%22%3ENo%3C%2Ftext%3E%3Ctext%20x%3D%2210.8125%22%20y%3D%2272%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"}errorHandler(_){_.currentTarget.src=this.holderSource}}return r.\u0275fac=function(_){return new(_||r)},r.\u0275cmp=p.\u0275\u0275defineComponent({type:r,selectors:[["ds-comcol-page-logo"]],inputs:{logo:"logo",alternateText:"alternateText"},decls:1,vars:1,consts:[["class","dso-logo mb-3",4,"ngIf"],[1,"dso-logo","mb-3"],[1,"img-fluid",3,"src","error"]],template:function(_,a){1&_&&p.\u0275\u0275template(0,f,2,2,"div",0),2&_&&p.\u0275\u0275property("ngIf",a.logo)},directives:[n.O5],styles:[""]}),r})()},7976:(b,h,o)=>{"use strict";o.d(h,{H:()=>L});var e=o(69808),n=(o(67216),o(5e3));o(86956),o(62017),o(7981),o(86785),o(52547),o(35897),o(61194),o(13365),o(84983),o(58046);var d=o(42501),T=o(83429);let L=(()=>{class C{}return C.\u0275fac=function(M){return new(M||C)},C.\u0275mod=n.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=n.\u0275\u0275defineInjector({imports:[[e.ez,T.e,d.m]]}),C})()},83429:(b,h,o)=>{"use strict";o.d(h,{e:()=>U});var e=o(69808),p=o(50358),n=o(5e3),f=o(8108),m=o(19084);function r(E,W){if(1&E){const P=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",1),n.\u0275\u0275listener("dfBlur",function(j){n.\u0275\u0275restoreView(P);const K=n.\u0275\u0275nextContext();return K.onCustomEvent(j,K.blur)})("dfChange",function(j){n.\u0275\u0275restoreView(P);const K=n.\u0275\u0275nextContext();return K.onCustomEvent(j,K.change)})("dfFocus",function(j){n.\u0275\u0275restoreView(P);const K=n.\u0275\u0275nextContext();return K.onCustomEvent(j,K.focus)})("ngbEvent",function(j){n.\u0275\u0275restoreView(P);const K=n.\u0275\u0275nextContext();return K.onCustomEvent(j,K.ngbEvent)}),n.\u0275\u0275elementEnd()}if(2&E){const P=W.$implicit,R=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("d-none",P.hidden),n.\u0275\u0275property("formId",R.formId)("group",R.formGroup)("hasErrorMessaging",P.hasErrorMessages)("hidden",P.hidden)("layout",R.formLayout)("model",P)("templates",R.templates)("asBootstrapFormGroup",!0)}}let c=(()=>{class E extends f.rmD{constructor(P,R){super(P,R),this.blur=new n.EventEmitter,this.change=new n.EventEmitter,this.focus=new n.EventEmitter,this.ngbEvent=new n.EventEmitter}}return E.\u0275fac=function(P){return new(P||E)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(f.rJA))},E.\u0275cmp=n.\u0275\u0275defineComponent({type:E,selectors:[["ds-dynamic-form"]],contentQueries:function(P,R,j){if(1&P&&n.\u0275\u0275contentQuery(j,f.ATj,4),2&P){let K;n.\u0275\u0275queryRefresh(K=n.\u0275\u0275loadQuery())&&(R.templates=K)}},viewQuery:function(P,R){if(1&P&&n.\u0275\u0275viewQuery(m.B,5),2&P){let j;n.\u0275\u0275queryRefresh(j=n.\u0275\u0275loadQuery())&&(R.components=j)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","d-none","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(P,R){1&P&&n.\u0275\u0275template(0,r,1,10,"ds-dynamic-form-control-container",0),2&P&&n.\u0275\u0275property("ngForOf",R.formModel)("ngForTrackBy",R.trackByFn)},directives:[e.sg,m.B],encapsulation:2}),E})();o(43714),o(6084),o(71673),o(56804),o(46047),o(59072),o(20771),o(96153),o(93181);var d=o(77778),T=o(11860),M=(o(72816),o(26625),o(26690),o(8756),o(42501)),$=o(86956),V=o(53956),l=(o(13821),o(26076),o(99069),o(55741),o(65806)),v=o(93075),i=o(21283);let U=(()=>{class E{}return E.\u0275fac=function(P){return new(P||E)},E.\u0275mod=n.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:f.y8$,useValue:m._}],imports:[[e.ez,f.H9g,l.zj,V.t,M.m,$.aw]]}),E})();n.\u0275\u0275setComponentScope(d.i,[v.JL,v.sg,v.x0,e.mk,e.sg,m.B],[]),n.\u0275\u0275setComponentScope(T.s,[v.JL,v.sg,v.CE,e.mk,i.Wj,e.sg,i.Zt,i.Bh,v.x0,e.tP,m.B],[]),n.\u0275\u0275setComponentScope(p.U,[v._Y,v.JL,v.sg,c,f.ATj,e.O5],[$.X$,e.Ov])},1266:b=>{function h(o){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e})}h.keys=()=>[],h.resolve=h,h.id=1266,b.exports=h}}]);